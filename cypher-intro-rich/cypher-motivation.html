<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.1. Background and Motivation -  - The Neo4j Manual v2.2-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="cypher-getting-started.html" title="Chapter 4. Introduction to Cypher" /><link rel="next" href="cypher-intro-patterns.html" title="4.2. Graphs, Patterns, and Cypher" /><link rel="copyright" href="ln-d5e39.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="4.1. Background and Motivation" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-71803";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='//fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/theme/neo.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/addon/runmode/runmode.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/shell/shell.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/sql/sql.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/xml/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/clike/clike.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/cypher/cypher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/properties/properties.min.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.2-SNAPSHOT</span><span>4.1. Background and Motivation</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="cypher-getting-started.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="cypher-getting-started.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="cypher-intro-patterns.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="cypher-motivation"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">4.1. Background and Motivation</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="cypher-motivation.html#_query_processing">Query processing</a></span></li></ul></div>

<p>Initially, all Neo4j actions (eg, queries) had to be programmed in <a class="ulink" href="https://en.wikipedia.org/wiki/Java_(programming_language)" target="_blank">Java</a>, using a set of graph traversal <a class="ulink" href="https://en.wikipedia.org/wiki/Application_programming_interface" target="_blank">APIs</a>.
This approach is still used for tasks that require high efficiency, flexibility, etc.
However, writing queries in this fashion can be challenging and time consuming, particularly for non-programmers.</p>
<p>Cypher, developed in response to this need, provides a far more convenient way to express queries and other Neo4j actions.
Although Cypher is particularly useful for exploratory work, it is fast enough (in many cases) to be used in production.
Java-based approaches (eg, unmanaged extensions) can also be used to handle particularly demanding use cases.</p>
<section class="section" id="_query_processing"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Query processing</h3></div></div></div>

<p>To use Cypher effectively, it’s useful to have an idea of how it works.
So, let’s take a high-level look at the way Cypher processes queries.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

Parse and validate the query.

</li><li class="listitem">

Generate the search strategy.

</li><li class="listitem">

Locate the initial node(s).

</li><li class="listitem">

Select and traverse relations.

</li><li class="listitem">

Change and/or return values.

</li></ul></div>
<section class="section" id="_preparation"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Preparation</h4></div></div></div>

<p>Java-based query specifications are <a class="ulink" href="https://en.wikipedia.org/wiki/Imperative_programming" target="_blank">imperative</a>, telling Neo4j what actions to perform, how to handle variations, etc.
Cypher’s queries, in contrast, are <a class="ulink" href="https://en.wikipedia.org/wiki/Declarative_programming" target="_blank">declarative</a>:
they only specify (in abstract form) what the user wants.</p>
<p>Parsing and validating the Cypher statement(s) is important, but mundane.
Cypher is not a particularly complicated language, so conventional compilation tools can easily handle its syntax.
However, generating an optimal search strategy can be far more challenging.</p>
<p>The search strategy must tell the database how to locate initial node(s), select relations for traversal, etc.
This involves tricky optimization problems (eg, which actions should happen first), but we can safely leave the details to the Neo4j engineers.
So, let’s move on to locating the initial node(s).</p>
</section>
<section class="section" id="_locate_the_initial_node_s"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Locate the initial node(s)</h4></div></div></div>

<p>Neo4j is highly optimized for traversing property graphs.
Under ideal circumstances, it can traverse millions of nodes and relations per second, following chains of pointers in the computer’s memory.</p>
<p>However, before traversal can begin, Neo4j must know the IDs of one or more starting nodes.
Unless the user (or, more likely, a client program) can provide this information, Cypher will have to search for these nodes.</p>
<p>A "brute force" search of the database (eg, for a specified property value) can be <span class="emphasis"><em>very</em></span> time consuming.
Every node must be be examined, first to see if it has the property, then to see if the value meets the desired criteria.</p>
<p>To avoid this effort, Neo4j creates and uses <a class="ulink" href="https://en.wikipedia.org/wiki/Inverted_index" target="_blank">inverted indexes</a>.
Each type of relation is indexed by default (?); indexes may also be created for specified properties of nodes with specified labels.</p>
<p>Using a <a class="ulink" href="https://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank">binary search algorithm</a> of an indexed, N-item collection, we only need to examine log2(N) items.
For example, searching a million nodes would only require 20 lookups.
That’s a lot better than a million, but it still takes time.
So, Neo4j uses a separate index for each label/property combination.</p>
</section>
<section class="section" id="_traversal_and_actions"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Traversal and actions</h4></div></div></div>

<p>Once the initial IDs are determined, Cypher can traverse portions of the graph and perform any requested actions.
The search strategy helps Cypher to determine which nodes are relevant, which relations to traverse, etc.</p>
<p>Because Neo4j cannot predict what it will find in the graph, its approach tends to be <a class="ulink" href="https://en.wikipedia.org/wiki/Heuristic_(computer_science)" target="_blank">heuristic</a> (eg, data-driven, learning, rule-based).
So, there is no guarantee that a given query will follow a particular path through the graph, even on two successive invocations.</p>
</section>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://neo4j.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>