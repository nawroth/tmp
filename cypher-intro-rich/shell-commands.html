<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>32.6. How to use (individual commands) -  - The Neo4j Manual v2.2-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="shell-titles.html" title="32.5. Node titles" /><link rel="next" href="shell-sample-session.html" title="32.7. An example shell session" /><link rel="copyright" href="ln-d5e39.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="32.6. How to use (individual commands)" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-71803";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='//fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/theme/neo.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/addon/runmode/runmode.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/shell/shell.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/sql/sql.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/xml/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/clike/clike.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/cypher/cypher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/properties/properties.min.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.2-SNAPSHOT</span><span>32.6. How to use (individual commands)</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="shell-titles.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="shell.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="shell-sample-session.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="shell-commands"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">32.6. How to use (individual commands)</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="shell-commands.html#comments">Comments</a></span></li><li><span class="section"><a href="shell-commands.html#shell-current-pos">Current node/relationship and path</a></span></li><li><span class="section"><a href="shell-commands.html#shell-listing">Listing the contents of a node/relationship</a></span></li><li><span class="section"><a href="shell-commands.html#_creating_nodes_and_relationships">Creating nodes and relationships</a></span></li><li><span class="section"><a href="shell-commands.html#_setting_renaming_and_removing_properties">Setting, renaming and removing properties</a></span></li><li><span class="section"><a href="shell-commands.html#_deleting_nodes_and_relationships">Deleting nodes and relationships</a></span></li><li><span class="section"><a href="shell-commands.html#shell-env-vars">Environment variables</a></span></li><li><span class="section"><a href="shell-commands.html#_executing_groovy_python_scripts">Executing groovy/python scripts</a></span></li><li><span class="section"><a href="shell-commands.html#_traverse">Traverse</a></span></li><li><span class="section"><a href="shell-commands.html#_query_with_cypher">Query with Cypher</a></span></li><li><span class="section"><a href="shell-commands.html#shell-listing-indexes-and-constraints">Listing Indexes and Constraints</a></span></li><li><span class="section"><a href="shell-commands.html#shell-legacy-indexing">Legacy Indexing</a></span></li><li><span class="section"><a href="shell-commands.html#_transactions">Transactions</a></span></li><li><span class="section"><a href="shell-commands.html#_dumping_the_database_or_cypher_statement_results">Dumping the database or Cypher statement results</a></span></li></ul></div>

<p>The shell is modeled after Unix shells like bash that you use to walk around your local file system.
It has some of the same commands, like <code class="literal">cd</code> and <code class="literal">ls</code>.
When you first start the shell (see instructions above), you will get a list of all the available commands.
Use <code class="literal">man &lt;command&gt;</code> to get more info about a particular command. Some notes:</p>
<section class="section" id="comments"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Comments</h3></div></div></div>

<p>Single line comments, which will be ignored, can be made by using the prefix <code class="literal">//</code>. Example:</p>
<pre class="programlisting" data-lang="plain">// This is a comment</pre>
</section>
<section class="section" id="shell-current-pos"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Current node/relationship and path</h3></div></div></div>

<p>You have a current node/relationship and a "current path" (like a current working directory in bash) that you’ve traversed so far.
When the shell first starts you are not positioned on any entity, but you can <code class="literal">cd</code> your way through the graph (check your current path at any time with the <code class="literal">pwd</code> command).
<code class="literal">cd</code> can be used in different ways:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">cd &lt;node-id&gt;</code> will traverse one relationship to the supplied node id. The node must have a direct relationship to the current node.

</li><li class="listitem">

<code class="literal">cd -a &lt;node-id&gt;</code> will do an absolute path change, which means the supplied node doesn’t have to have a direct relationship to the current node.

</li><li class="listitem">

<code class="literal">cd -r &lt;relationship-id&gt;</code> will traverse to a relationship instead of a node. The relationship must have the current node as either start or end point. To see the relationship ids use the <code class="literal">ls -vr</code> command on nodes.

</li><li class="listitem">

<code class="literal">cd -ar &lt;relationship-id&gt;</code> will do an absolute path change which means the relationship can be any relationship in the graph.

</li><li class="listitem">

<code class="literal">cd ..</code> will traverse back one step to the previous location, removing the last path item from your current path (<code class="literal">pwd</code>).

</li><li class="listitem">

<code class="literal">cd start</code> <span class="emphasis"><em>(only if your current location is a relationship)</em></span>. Traverses to the start node of the relationship.

</li><li class="listitem">

<code class="literal">cd end</code> <span class="emphasis"><em>(only if your current location is a relationship)</em></span>. Traverses to the end node of the relationship.

</li></ul></div>
</section>
<section class="section" id="shell-listing"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Listing the contents of a node/relationship</h3></div></div></div>

<p>List contents of the current node/relationship (or any other node) with the <code class="literal">ls</code> command.
Please note that it will give an empty output if the current node/relationship has no properties or relationships (for example in the case of a brand new graph).
<code class="literal">ls</code> can take a node id as argument as well as filters, see <a class="xref" href="shell-filters.html" title="32.4. Filters">Section 32.4, “Filters”</a> and for information about how to specify direction see <a class="xref" href="shell-options-enum.html" title="32.3. Enum options">Section 32.3, “Enum options”</a>.
Use <code class="literal">man ls</code> for more info.</p>
</section>
<section class="section" id="_creating_nodes_and_relationships"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Creating nodes and relationships</h3></div></div></div>

<p>You create new nodes by connecting them with relationships to the current node.
For example, <code class="literal">mkrel -t A_RELATIONSHIP_TYPE -d OUTGOING -c</code> will create a new node (<code class="literal">-c</code>) and draw to it an <code class="literal">OUTGOING</code> relationship of type <code class="literal">A_RELATIONSHIP_TYPE</code> from the current node.
If you already have two nodes which you’d like to draw a relationship between (without creating a new node) you can do for example, <code class="literal">mkrel -t A_RELATIONSHIP_TYPE -d OUTGOING -n &lt;other-node-id&gt;</code> and it will just create a new relationship between the current node and that other node.</p>
</section>
<section class="section" id="_setting_renaming_and_removing_properties"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Setting, renaming and removing properties</h3></div></div></div>

<p>Property operations are done with the <code class="literal">set</code>, <code class="literal">mv</code> and <code class="literal">rm</code> commands.
These commands operates on the current node/relationship.</p>
<p>Use <code class="literal">set &lt;key&gt; &lt;value&gt;</code>, optionally with the <code class="literal">-t</code> option (for value type), to set a property.
Supports every type of value that Neo4j supports. Examples of a property of type <code class="literal">int</code>:</p>
<pre class="programlisting" data-lang="plain">$ set -t int age 29</pre>
<p>And an example of setting a <code class="literal">double[]</code> property:</p>
<pre class="programlisting" data-lang="plain">$ set -t double[] my_values [1.4,12.2,13]</pre>
<p>Example of setting a <code class="literal">String</code> property containing a JSON string:</p>
<pre class="programlisting" data-lang="plain">mkrel -c -d i -t DOMAIN_OF --np "{'app':'foobar'}"</pre>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">rm &lt;key&gt;</code> removes a property.

</li><li class="listitem">

<code class="literal">mv &lt;key&gt; &lt;new-key&gt;</code> renames a property from one key to another.

</li></ul></div>
</section>
<section class="section" id="_deleting_nodes_and_relationships"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Deleting nodes and relationships</h3></div></div></div>

<p>Deletion of nodes and relationships is done with the <code class="literal">rmnode</code> and <code class="literal">rmrel</code> commands.
<code class="literal">rmnode</code> can delete nodes, if the node to be deleted still has relationships they can also be deleted by supplying -f option.
<code class="literal">rmrel</code> can delete relationships, it tries to ensure connectedness in the graph, but relationships can be deleted regardless with the -f option.
<code class="literal">rmrel</code> can also delete the node on the other side of the deleted relationship if it’s left with no more relationships, see -d option.</p>
</section>
<section class="section" id="shell-env-vars"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Environment variables</h3></div></div></div>

<p>The shell uses environment variables a-la bash to keep session information, such as the current path and more.
The commands for this mimics the bash commands <code class="literal">export</code> and <code class="literal">env</code>. For example you can at anytime issue a <code class="literal">export STACKTRACES=true</code> command to set the <code class="literal">STACKTRACES</code> environment variable to <code class="literal">true</code>. This will then result in stacktraces being printed if an exception or error should occur.
Allowed values are all parseable JSON strings, so maps <code class="literal">{age:10,name:"Mattias"}</code> and arrays <code class="literal">[1,2,3]</code> are also supported.</p>
<p>Variables can also be assigned to each other. E.g. <code class="literal">a=b</code> will result in <code class="literal">a</code> containing the value of <code class="literal">b</code>.</p>
<p>This becomes especially interesting as all shell variables are automatically passed to cypher statements as parameters. That makes it easy to query for certain start nodes or
 create nodes and relationships with certain provided properties (as maps).</p>
<p>Values are removed by setting them to <code class="literal">null</code> or an empty value. List environment variables using <code class="literal">env</code></p>
</section>
<section class="section" id="_executing_groovy_python_scripts"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Executing groovy/python scripts</h3></div></div></div>

<p>The shell has support for executing scripts, such as <a class="ulink" href="http://groovy.codehaus.org" target="_blank">Groovy</a> and <a class="ulink" href="http://www.python.org" target="_blank">Python</a> (via <a class="ulink" href="http://www.jython.org" target="_blank">Jython</a>).
As of now the scripts (*.groovy, *.py) must exist on the server side and gets called from a client with for example, <code class="literal">gsh --renamePerson 1234 "Mathias" "Mattias" --doSomethingElse</code> where the scripts renamePerson.groovy and doSomethingElse.groovy must exist on the server side in any of the paths given by the <code class="literal">GSH_PATH</code> environment variable (defaults to .:src:src/script). This variable is like the java classpath, separated by a <code class="literal">:</code>. The python/jython scripts can be executed with the <code class="literal">jsh</code> in a similar fashion, however the scripts have the .py extension and the environment variable for the paths is <code class="literal">JSH_PATH</code>.</p>
<p>When writing the scripts assume that there’s made available an <code class="literal">args</code> variable (a String[]) which contains the supplied arguments.
In the case of the <code class="literal">renamePerson</code> example above the array would contain <code class="literal">["1234", "Mathias", "Mattias"]</code>.
Also please write your outputs to the <code class="literal">out</code> variable, such as <code class="literal">out.println( "My tracing text" )</code> so that it will be printed at the shell client instead of the server.</p>
</section>
<section class="section" id="_traverse"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Traverse</h3></div></div></div>

<p>You can traverse the graph with the <code class="literal">trav</code> command which allows for simple traversing from the current node.
You can supply which relationship types (w/ regex matching) and optionally direction as well as property filters for matching nodes.
In addition to that you can supply a command line to execute for each match.
An example: <code class="literal">trav -o depth -r KNOWS:both,HAS_.*:incoming -c "ls $n"</code>.
Which means traverse depth first for relationships with type <code class="literal">KNOWS</code> disregarding direction and incoming relationships with type matching <code class="literal">HAS_.\*</code> and do a <code class="literal">ls &lt;matching node&gt;</code> for each match. The node filtering is supplied with the <code class="literal">-f</code> option, see <a class="xref" href="shell-filters.html" title="32.4. Filters">Section 32.4, “Filters”</a>.
See <a class="xref" href="shell-options-enum.html" title="32.3. Enum options">Section 32.3, “Enum options”</a> for the traversal order option. Even relationship types/directions are supplied using the same format as filters.</p>
</section>
<section class="section" id="_query_with_cypher"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Query with Cypher</h3></div></div></div>

<p>You can use Cypher to query the graph. For that, use the <code class="literal">match</code> or <code class="literal">start</code> command.
You can also use <code class="literal">create</code> statements to create nodes and relationships and use the <code class="literal">cypher VERSION</code> prefix to select a certain cypher version.</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>Cypher queries need to be terminated by a semicolon <code class="literal">;</code>.</p></td></tr></table></div>
<p>Cypher commands are given all shell variables as parameters and the special <code class="literal">self</code> parameter for the current node or relationship.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">start n = node(0) return n;</code> will give you a listing of the node with ID 0

</li><li class="listitem">

<code class="literal">cypher 1.9 start n = node(0) return n;</code> will execute the query with Cypher version 1.9

</li><li class="listitem">

<code class="literal">START n = node({self}) MATCH (n)-[:KNOWS]-&gt;(friend) RETURN friend;</code> will
return the nodes connected to the current node.

</li><li class="listitem">

<code class="literal">START n=node({me}) CREATE (me)-[r:KNOWS]-&gt;(friend {props});</code> will
create the friend and the relationship according to the variables available.

</li></ul></div>
</section>
<section class="section" id="shell-listing-indexes-and-constraints"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Listing Indexes and Constraints</h3></div></div></div>

<p>The <code class="literal">schema</code> command allows to list all existing indexes and constraints together with their current status.</p>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Note</b><p>This command does not list legacy indexes. For working with legacy indexes, please see <a class="xref" href="shell-commands.html#shell-legacy-indexing" title="Legacy Indexing">the section called “Legacy Indexing”</a>.</p></td></tr></table></div>
<p>List all indexes and constraints:</p>
<pre class="programlisting" data-lang="plain">schema</pre>
<p>List indexes or constraints on <code class="literal">:Person</code> nodes for the property <code class="literal">name</code>:</p>
<pre class="programlisting" data-lang="plain">schema -l :Person -p name</pre>
<p>The <code class="literal">schema</code> command supports the following parameters:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">-l :Label</code> only list indexes or constraints for the given label <code class="literal">:Label</code>

</li><li class="listitem">

<code class="literal">-p propertyKey</code> only list indexes or constraints for the given property key <code class="literal">propertyKey</code>

</li><li class="listitem">

<code class="literal">-v</code> if an index is in the <code class="literal">FAILED</code> state, print a verbose error cause if available

</li></ul></div>
<p>Indexes and constraints can be created or removed using Cypher or the Java Core API. They are updated automatically
whenever the graph is changed.  See <a class="xref" href="graphdb-neo4j-schema.html" title="3.7. Schema">Section 3.7, “Schema”</a> for more information.</p>
</section>
<section class="section" id="shell-legacy-indexing"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Legacy Indexing</h3></div></div></div>

<p>It’s possible to query and manipulate legacy indexes via the index command.</p>
<p>Example: <code class="literal">index -i persons name</code> (will index the name for the current node or relationship in the "persons" legacy index).</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">-g</code> will do exact lookup in the legacy index and display hits. You can supply <code class="literal">-c</code> with a command to be executed for each hit.

</li><li class="listitem">

<code class="literal">-q</code> will ask the legacy index a query and display hits. You can supply <code class="literal">-c</code> with a command to be executed for each hit.

</li><li class="listitem">

<code class="literal">--cd</code> will change current location to the hit from the query. It’s just a convenience for using the <code class="literal">-c</code> option.

</li><li class="listitem">

<code class="literal">--ls</code> will do a listing of the contents for each hit. It’s just a convenience for using the <code class="literal">-c</code> option.

</li><li class="listitem">

<code class="literal">-i</code> will index a key-value pair into a legacy index for the current node/relationship. If no value is given the property value for that key for the current node is used as value.

</li><li class="listitem">

<code class="literal">-r</code> will remove a key-value pair (if it exists) from a legacy index for the current node/relationship. Key and value are optional.

</li><li class="listitem">

<code class="literal">-t</code> will set the legacy index type to work with, for example <code class="literal">index -t Relationship --delete friends</code> will delete the <code class="literal">friends</code> relationship index.

</li></ul></div>
</section>
<section class="section" id="_transactions"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Transactions</h3></div></div></div>

<p>It is useful to be able to test changes, and then being able to commit or rollback said changes.</p>
<p>Transactions can be nested. With a nested transaction, a commit does not write any changes to disk, except for the
top level transaction. A rollback, however works regardless of the level of the transaction. It will roll back
all open transactions.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">begin transaction</code>  Starts a transaction.

</li><li class="listitem">

<code class="literal">commit</code> Commits a transaction.

</li><li class="listitem">

<code class="literal">rollback</code> Rollbacks all open transactions.

</li></ul></div>
</section>
<section class="section" id="_dumping_the_database_or_cypher_statement_results"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Dumping the database or Cypher statement results</h3></div></div></div>

<div class="admonitionblock Caution"><table><tr><td class="icon"><img alt="[Caution]" src="images/icons/admon/caution.svg" /></td><td class="content"><b>Experimental feature</b>

<p>The <code class="literal">dump</code> command has incomplete functionality.
It might not work for your use case or data size.</p>
</td></tr></table></div>
<p>As a simple way of exporting a database or a subset of it, the <code class="literal">dump</code> command converts the graph of a Cypher result or the whole database into a single Cypher <code class="literal">create</code> statement.</p>
<p>Examples:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<code class="literal">dump</code> dumps the whole database as single cypher create statement

</li><li class="listitem">

<code class="literal">dump START n=node({self}) MATCH p=(n)-[r:KNOWS*]-&gt;(m) RETURN n,r,m;</code> dumps the transitive friendship graph of the current node.

</li><li class="listitem">

<code class="literal">neo4j-shell -path db1 -c 'dump MATCH p=(n:Person {name:"Mattias"})-[r:KNOWS]-&gt;(m) RETURN p;' | neo4j-shell -path db2 -file -</code>
  imports the subgraph of the first database (db1) into the second (db2)

</li></ul></div>
<section class="section" id="_example_dump_scripts"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Example Dump Scripts</h4></div></div></div>

<pre class="programlisting" data-lang="bash"> # create a new node and go to it
 neo4j-sh (?)$ mknode --cd --np "{'name':'Neo'}"

 # create a relationship
 neo4j-sh (Neo,0)$ mkrel -c -d i -t LIKES --np "{'app':'foobar'}"

 # Export the cypher statement results
 neo4j-sh (Neo,0)$ dump MATCH (n)-[r]-(m) WHERE n = {self} return n,r,m;
 begin
 create (_0 {`name`:"Neo"})
 create (_1 {`app`:"foobar"})
 create _1-[:`LIKES`]-&gt;_0
 ;
 commit</pre>
<pre class="programlisting" data-lang="bash"> # create an index
 neo4j-sh (?)$ create index on :Person(name);
 +-------------------+
 | No data returned. |
 +-------------------+
 Indexes added: 1
 1155 ms


 # create one labeled node and a relationship
 neo4j-sh (?)$ create (m:Person:Hacker {name:'Mattias'}), (m)-[:KNOWS]-&gt;(m);
 +-------------------+
 | No data returned. |
 +-------------------+
 Nodes created: 1
 Relationships created: 1
 Properties set: 1
 Labels added: 2
 432 ms


 # Export the whole database including indexes
 neo4j-sh (?)$ dump
 begin
 create index on :`Person`(`name`)
 create (_0:`Person`:`Hacker` {`name`:"Mattias"})
 create _0-[:`KNOWS`]-&gt;_0
 ;
 commit</pre>
</section>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://neo4j.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>