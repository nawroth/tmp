<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.1. Graphs, Patterns and Cypher -  - The Neo4j Manual v2.2-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="cypher-getting-started.html" title="Chapter 4. Introduction to Cypher" /><link rel="next" href="cypherdoc-patterns-in-practice.html" title="4.2. Patterns in Practice" /><link rel="copyright" href="ln-d5e41.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="4.1. Graphs, Patterns and Cypher" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-65659";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script><script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.0/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script><script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/codemirror.css" />
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/theme/neo.css" />
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/codemirror.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/addon/runmode/runmode.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/javascript/javascript.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/shell/shell.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/sql/sql.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/xml/xml.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/clike/clike.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/cypher/cypher.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="http://docs.neo4j.org/chunked/versions.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.2-SNAPSHOT</span><span>4.1. Graphs, Patterns and Cypher</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="cypher-getting-started.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="cypher-getting-started.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="cypherdoc-patterns-in-practice.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="cypher-intro-patterns"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">4.1. Graphs, Patterns and Cypher</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="cypher-intro-patterns.html#_it_8217_s_all_about_patterns">It’s all about Patterns</a></span></li><li><span class="section"><a href="cypher-intro-patterns.html#_cypher_concepts">Cypher Concepts</a></span></li><li><span class="section"><a href="cypher-intro-patterns.html#_clauses">Clauses</a></span></li></ul></div>

<section class="section" id="_it_8217_s_all_about_patterns"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">It’s all about Patterns</h3></div></div></div>

<p>Graphs thrive on patterns, each graph is a connected structure which consists of many different patterns.</p>
<p>Patterns capture semantic information by describing how things relate.
They tell you if <span class="emphasis"><em>I KNOW you</em></span>, <span class="emphasis"><em>an Author WROTE a Book</em></span>, <span class="emphasis"><em>a Person LIVES at a Place</em></span> or <span class="emphasis"><em>an Actor ACTED_IN a Movie</em></span>.</p>
<p>This kind of simple pattern typically describes how two entities are related.
Combined with other patterns, this can represent complex domains and interesting use-cases.</p>
<p>Small pattern structures are also easy for the human brain to handle.
We are well versed in detecting patterns not only in our daily lives but also in data, when the data is presented visually.</p>
<p>Cypher is all about patterns.
They are used to describe graph structures you want to create or information you want to find.</p>
</section>
<section class="section" id="_cypher_concepts"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Cypher Concepts</h3></div></div></div>

<p>Cypher is a textual, declarative query language, much like SQL for relational databases, but for graphs.
It doesn’t instruct the database to run certain operations but instead describes the things you want to create or find.
Neo4j then figures out the best way to do that.</p>
<p>With Cypher, you use symbolic textual patterns to describe graph patterns (circles for nodes and arrows for relationships) that you would usually draw on a whiteboard.</p>
<p>It uses ASCII-art to visualize the typical circles for nodes with parentheses surrounding a piece of information.</p>
<p>To describe a node for a  <code class="literal">Movie</code> entity with a <code class="literal">title</code> and a <code class="literal">released</code>-year we would use a textual pattern like this:</p>
<pre class="programlisting" data-lang="cypher">(matrix:Movie {title:"The Matrix", released:1997})</pre>
<p>The <code class="literal">Movie</code> label tags the otherwise untyped node as a movie and is prefixed by a colon to become a symbol: <code class="literal">:Movie</code>.
The <code class="literal">matrix</code> identifier is just a name that we use to refer to this node within the statement.
It is optional and only relevant in the scope of the same statement; it’s not persisted.</p>
<p>The freely chosen properties of that node, <code class="literal">title</code> and <code class="literal">released</code> are represented as a map (you might want to call it a dictionary or JSON-like structure).
They are listed as keys/value pairs within curly braces.</p>
<p>To “draw” the relationships of your pattern, you would just use the appropriate symbols, which, in the simplest case is a <code class="literal">--</code>.
The direction of a relationship can be denoted by using an arrowhead: <code class="literal">--&gt;</code> or <code class="literal">&lt;--</code>.
If you have more information about that relationship, like a relationship type or properties on it, you can include them inside square brackets.</p>
<p>For the movies domain, this could be an <span class="emphasis"><em>ACTED_IN</em></span> relationship.
So the following could be a basic fact or pattern in this domain:</p>
<pre class="programlisting" data-lang="cypher">(keanu:Person:Actor {name:"Keanu Reeves"}) -[role:ACTED_IN {roles : ["Neo"]}]-&gt; (matrix:Movie {title:"The Matrix"})</pre>
<p>Like with node labels, the relationship-type <code class="literal">ACTED_IN</code> is added as a symbol, prefixed with a colon: <code class="literal">:ACTED_IN</code>.
As with nodes you can use identifiers, in this case <code class="literal">role</code>, to refer to the relationship later in the statement.
You use the same notation for relationship properties as for node properties.
In this case we went with an array property for the <code class="literal">roles</code>.</p>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Pattern Nodes vs. Database Nodes</b>

<p>Note the difference between pattern nodes and database nodes.
A pattern node is used to <span class="emphasis"><em>describe</em></span> a node that can exist zero, one or any number of times in the database.</p>
<p>The same goes for relationships.</p>
</td></tr></table></div>
<p>You can also assign the whole pattern to an identifier which then allows you to access each of the matched paths in the graph.
This way you can for instance inspect them or use them in other expressions.</p>
<pre class="programlisting" data-lang="cypher">path = (:Person)-[:ACTED_IN]-&gt;(:Movie)</pre>
<p>This path variable would contain two nodes and the connecting relationship for each such pattern found or created.
There are a number of functions to access details of a path, including <code class="literal">nodes(path)</code>, <code class="literal">rels(path)</code> (same as <code class="literal">relationships(path)</code>), and <code class="literal">length(path)</code>.</p>
</section>
<section class="section" id="_clauses"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Clauses</h3></div></div></div>

<p>Cypher statements consist of individual <span class="emphasis"><em>clauses</em></span> which are their building blocks.
There are clauses that can create and match patterns in the graph but also filter, project, sort or paginate results or connect/compose partial statements.
We will use Cypher clauses to compose more complex statements that express what we want to know or create.
Neo4j then figures out how to achieve that in an efficient manner.</p>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://www.neotechnology.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>