<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>24.6. Caches in Neo4j -  - The Neo4j Manual v2.2-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="configuration-settings.html" title="24.5. Configuration Settings" /><link rel="next" href="configuration-logical-logs.html" title="24.7. Logical logs" /><link rel="copyright" href="ln-d5e39.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="24.6. Caches in Neo4j" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-68604";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='//fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/theme/neo.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/addon/runmode/runmode.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/shell/shell.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/sql/sql.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/xml/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/clike/clike.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/cypher/cypher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/properties/properties.min.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<!-- Scrolling -->
<script type="text/javascript" src="common/jquery/jquery.kinetic.min.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.2-SNAPSHOT</span><span>24.6. Caches in Neo4j</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="configuration-settings.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="configuration.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="configuration-logical-logs.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="configuration-caches"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">24.6. Caches in Neo4j</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="configuration-caches.html#_file_buffer_cache">File buffer cache</a></span></li><li><span class="section"><a href="configuration-caches.html#_object_cache">Object cache</a></span></li></ul></div>

<p>For how to provide custom configuration to Neo4j, see <a class="xref" href="configuration-introduction.html" title="24.1. Introduction">Section 24.1, “Introduction”</a>.</p>
<p>Neo4j utilizes two different types of caches:
A file buffer cache and an object cache.
The file buffer cache caches the storage file data in the same format as it is stored on the durable storage media.
The object cache caches the nodes, relationships and properties in a format that is optimized for high traversal speeds and transactional writes.</p>
<section class="section" id="_file_buffer_cache"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">File buffer cache</h3></div></div></div>

<div class="sidebar"><div xmlns="" class="titlepage"><div><div><p xmlns="http://www.w3.org/1999/xhtml" class="title"><strong>Quick info</strong></p></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

The file buffer cache is sometimes called <span class="emphasis"><em>low level cache</em></span>, <span class="emphasis"><em>file system cache</em></span> or <span class="emphasis"><em>the page cache</em></span>.

</li><li class="listitem">

It caches the Neo4j data as stored on the durable media.

</li><li class="listitem">

It uses the operating system memory mapping features when possible.

</li><li class="listitem">

Neo4j will configure the cache automatically, but you might want to tune it yourself to get the most out of the available memory.

</li></ul></div>
</div>
<p>The file buffer cache caches the Neo4j data in the same format as it is represented on the durable storage media.
The purpose of this cache layer is to improve both read and write performance.
The file buffer cache improves write performance by writing to the cache and deferring durable write until the logical log is rotated.
This behavior is safe since all transactions are always durably written to the logical log, which can be used to recover the store files in the event of a crash.
It also improves write performance by batching up many small writes into fewer page-sized writes.</p>
<p>Since the operation of the cache is tightly related to the data it stores, a short description of the Neo4j durable representation format is necessary background.
Neo4j stores data in multiple files and relies on the underlying file system to handle this efficiently.
Each Neo4j storage file contains uniform fixed size records of a particular type:</p>
<div class="informaltable">



<table cellspacing="0" cellpadding="0"><thead><tr><th> Store file  </th><th> Record size  </th><th> Contents</th></tr></thead><tbody><tr><td><p>neostore.nodestore.db</p></td><td><p><code class="literal">15 B</code></p></td><td><p>Nodes</p></td></tr><tr><td><p>neostore.relationshipstore.db</p></td><td><p><code class="literal">34 B</code></p></td><td><p>Relationships</p></td></tr><tr><td><p>neostore.propertystore.db</p></td><td><p><code class="literal">41 B</code></p></td><td><p>Properties for nodes and relationships</p></td></tr><tr><td><p>neostore.propertystore.db.strings</p></td><td><p><code class="literal">128 B</code></p></td><td><p>Values of string properties</p></td></tr><tr><td><p>neostore.propertystore.db.arrays</p></td><td><p><code class="literal">128 B</code></p></td><td><p>Values of array properties</p></td></tr></tbody></table>
</div>
<p>For strings and arrays, where data can be of variable length, data is stored in one or more 120B chunks, with 8B record overhead.
The sizes of these blocks can actually be configured when the store is created using the <code class="literal">string_block_size</code> and <code class="literal">array_block_size</code> parameters.
The size of each record type can also be used to calculate the storage requirements of a Neo4j graph or the appropriate cache size for each file buffer cache.
Note that some strings and arrays can be stored without using the string store or the array store respectively, see <a class="xref" href="short-strings.html" title="24.9. Compressed storage of short strings">Section 24.9, “Compressed storage of short strings”</a> and <a class="xref" href="short-arrays.html" title="24.10. Compressed storage of short arrays">Section 24.10, “Compressed storage of short arrays”</a>.</p>
<p>Neo4j uses multiple file buffer caches, one for each different storage file.
Each file buffer cache divides its storage file into a number of equally sized windows.
Each cache window contains an even number of storage records.
The cache holds the most active cache windows in memory and tracks hit vs. miss ratio for the windows.
When the hit ratio of an uncached window gets higher than the miss ratio of a cached window, the cached window gets evicted and the previously uncached window is cached instead.</p>
<div class="admonitionblock Important"><table><tr><td class="icon"><img alt="[Important]" src="images/icons/admon/important.svg" /></td><td class="content"><b>Important</b><p>Note that the block sizes can only be configured at store creation time.</p></td></tr></table></div>
<section class="section" id="_configuration"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Configuration</h4></div></div></div>

<div class="informaltable">
<table cellspacing="0" cellpadding="0"><thead><tr><th> Parameter                 </th><th> Possible values   </th><th> Effect</th></tr></thead><tbody><tr><td><p><code class="literal">mapped_memory_total_size</code></p></td><td><p>The maximum amount of memory to use for the file buffer cache, either in bytes
  (or greater byte-like units, such as <code class="literal">100M</code> for 100 mega-bytes, or <code class="literal">4G</code> for 4 giga-bytes)
  or a percentage of the available amount of memory.</p></td><td><p>The amount of memory to use for mapping the store files, either in bytes or as a percentage of available memory. This will be clipped at the amount of free memory observed when the database starts, and automatically be rounded down to the nearest whole page. For example, if <code class="literal">500MB</code> is configured, but only 450MB of memory is free when the database starts, then the database will map at most 450MB. If <code class="literal">50%</code> is configured, and the system has a capacity of 4GB, then at most 2GB of memory will be mapped, unless the database observes that less than 2GB of memory is free when it starts.</p></td></tr><tr><td><p><code class="literal">mapped_memory_page_size</code></p></td><td><p>The number of bytes per page. Preferably a power-of-two that is close to the native sector size or page size of the durable medium.</p></td><td><p>The size of the pages, in bytes, that the database will use for mapping the store files into memory.
  Don’t change this without carefully measuring the performance implications.</p></td></tr><tr><td><p><code class="literal">string_block_size</code></p></td><td rowspan="2"><p>The number of bytes per block.</p></td><td><p>Specifies the block size for storing strings.
  This parameter is only honored when the store is created, otherwise it is ignored.
  Note that each character in a string occupies two bytes, meaning that a block size of 120 (the default size) will hold a 60 character long string before overflowing into a second block.
  Also note that each block carries an overhead of 8 bytes.
  This means that if the block size is 120, the size of the stored records will be 128 bytes.</p></td></tr><tr><td><p><code class="literal">array_block_size</code></p></td><td><p>Specifies the block size for storing arrays.
  This parameter is only honored when the store is created, otherwise it is ignored.
  The default block size is 120 bytes, and the overhead of each block is the same as for string blocks, i.e., 8 bytes.</p></td></tr><tr><td><p><code class="literal">dump_configuration</code></p></td><td><p><code class="literal">true</code> or <code class="literal">false</code></p></td><td><p>If set to <code class="literal">true</code> the current configuration settings will be written to the default system output, mostly the console or the logfiles.</p></td></tr></tbody></table>
</div>
<p>When configuring the amount of memory allowed for the file buffers and the JVM heap, make sure to also leave room for the operating systems page cache, and other programs and services the system might want to run.
It is important to configure the memory usage, such that the Neo4j JVM process won’t need to use any swap memory, as this will cause a significant drag on the performance of the system.</p>
<p>When reading the configuration parameters on startup Neo4j will automatically configure the parameters that are not specified.
The cache sizes will be configured based on the available memory on the computer.</p>
</section>
</section>
<section class="section" id="_object_cache"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Object cache</h3></div></div></div>

<div class="sidebar"><div xmlns="" class="titlepage"><div><div><p xmlns="http://www.w3.org/1999/xhtml" class="title"><strong>Quick info</strong></p></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

The object cache is sometimes called <span class="emphasis"><em>high level cache</em></span>.

</li><li class="listitem">

It caches the Neo4j data in a form optimized for fast traversal.

</li></ul></div>
</div>
<p>The object cache caches individual nodes and relationships and their properties in a form that is optimized for fast traversal of the graph.
There are two different categories of object caches in Neo4j.</p>
<p>Firstly, there are the <span class="emphasis"><em>reference caches</em></span>.
With these caches, Neo4j will utilize as much of the allocated JVM heap memory as it can to hold nodes and relationships. It relies on garbage collection for eviction from the cache in an LRU manner.
Note however that Neo4j is “competing” for the heap space with other objects in the same JVM, such as a your application (if deployed in embedded mode) or intermediate objects produced by Cypher queries,
and Neo4j will yield to the application or query by using less memory for caching.</p>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Note</b><p>The High-Performance Cache described below is only available in the Neo4j Enterprise Edition.</p></td></tr></table></div>
<p>The other is the <span class="emphasis"><em>High-Performance Cache</em></span> which gets assigned a certain maximum amount of space on the JVM heap and will purge objects whenever it grows bigger than that.
Objects are evicted from the high performance cache when the maximum size is about to be reached, instead of relying on garbage collection (GC) to make that decision.
With the high-performance cache, GC-pauses can be better controlled.
The overhead of the High-Performance Cache is also much smaller as well as insert/lookup times faster than for reference caches.</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>The use of heap memory is subject to the Java Garbage Collector — depending on the cache type some tuning might be needed to play well with the GC at large heap sizes.
Therefore, assigning a large heap for Neo4j’s sake isn’t always the best strategy as it may lead to long GC-pauses.
Instead leave some space for Neo4j’s filesystem caches.
These are outside of the heap and under under the kernel’s direct control, thus more efficiently managed.</p></td></tr></table></div>
<p>The content of this cache are objects with a representation geared towards supporting the Neo4j object API and graph traversals.
Reading from this cache may be 5 to 10 times faster than reading from the file buffer cache.
This cache is contained in the heap of the JVM and the size is adapted to the current amount of available heap memory.</p>
<p>Nodes and relationships are added to the object cache as soon as they are accessed.
The cached objects are however populated lazily.
The properties for a node or relationship are not loaded until properties are accessed for that node or relationship.
String (and array) properties are not loaded until that particular property is accessed.
The relationships for a particular node is also not loaded until the relationships are accessed for that node.</p>
<section class="section" id="_configuration_2"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Configuration</h4></div></div></div>

<p>The main configuration parameter for the object cache is the <code class="literal">cache_type</code> parameter.
This specifies which cache implementation to use for the object cache.
Note that there will exist two cache instances, one for nodes and one for relationships.
The available cache types are:</p>
<div class="informaltable">
<table cellspacing="0" cellpadding="0"><thead><tr><th> <code class="literal">cache_type</code> </th><th> Description</th></tr></thead><tbody><tr><td><p><code class="literal">none</code></p></td><td><p>Do not use a high level cache. No objects will be cached.</p></td></tr><tr><td><p><code class="literal">soft</code></p></td><td><p>Provides optimal utilization of the available memory.
                 Suitable for high performance traversal.
                 May run into GC issues under high load if the frequently accessed parts of the graph does not fit in the cache.
                 This is the default cache type in Neo4j Community Edition.</p></td></tr><tr><td><p><code class="literal">weak</code></p></td><td><p>Provides short life span for cached objects.
                 Suitable for high throughput applications where a larger portion of the graph than what can fit into memory is frequently accessed.</p></td></tr><tr><td><p><code class="literal">strong</code></p></td><td><p>This cache will hold on to <span class="strong"><strong>all data</strong></span> that gets loaded to never release it again.
                 Provides good performance if your graph is small enough to fit in memory.</p></td></tr><tr><td><p><code class="literal">hpc</code></p></td><td><p>The High-Performance Cache. Provides means of assigning a specific amount of memory to dedicate to caching loaded nodes and relationships.
                 Small footprint and fast insert/lookup. Should be the best option for most scenarios. See below on how to configure it.
                 This cache type is only available in the Neo4j Enterprise Edition, and is the default in that edition.</p></td></tr></tbody></table>
</div>
</section>
<section class="section" id="high-performance-cache"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">High-Performance Cache</h4></div></div></div>

<p>How much memory to allocate to the High Performance Cache can be fine tuned to suit your use case.
There are two ways to configure memory usage for it.</p>
<p><span class="strong"><strong>Standard configuration</strong></span></p>
<p>For most use cases, simply specifying a percentage of the memory available for caching to use is enough to tune the High-Performance Cache.</p>
<p>Allocating more memory to the cache gives faster querying speed, but takes memory away from other components and may put strain on the JVM garbage collector.</p>
<p>The max amount of memory available for caching depends on which garbage collector you are using.
For CMS and G1 collectors (CMS is the Neo4j default), it will be equal to the max size of the old generation. How big
the old generation is is platform-dependent, but can for CMS and G1 be configured using the "NewRatio" JVM configuration
option.
For other collectors, it will be half of the total heap size.</p>
<div class="informaltable">
<table cellspacing="0" cellpadding="0"><thead><tr><th> <code class="literal">configuration option</code>   </th><th> Description (what it controls)                                                           </th><th> Example value</th></tr></thead><tbody><tr><td><p><code class="literal">cache.memory_ratio</code></p></td><td><p>Percentage, 0-100, of memory available for caching to use for caching. Default is 50%.</p></td><td><p><code class="literal">50.0</code></p></td></tr></tbody></table>
</div>
<p><span class="strong"><strong>Advanced configuration</strong></span></p>
<p>The advanced configuration gives more fine-grained control of how much memory to allocate specific parts of the cache.
There are two aspects to this configuration.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

The size of the array referencing the objects that are put in the cache.

</li><li class="listitem">

The maximum size of all the objects in the cache.

</li></ul></div>
<p>See below for further details.</p>
<div class="table" id="config-org.neo4j.kernel.impl.cache.HighPerformanceCacheSettings"><p class="title"><strong>High Performance Cache configuration settings</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><p><a class="link" href="configuration-caches.html#config_cache.memory_ratio" title="cache.memory_ratio">cache.memory_ratio</a></p></td><td><p>Set how much of the memory available for caching to use for caching.</p></td></tr><tr><td><p><a class="link" href="configuration-caches.html#config_node_cache_array_fraction" title="node_cache_array_fraction">node_cache_array_fraction</a></p></td><td><p>Fraction of the heap to dedicate to the array holding the nodes in the cache.</p></td></tr><tr><td><p><a class="link" href="configuration-caches.html#config_node_cache_size" title="node_cache_size">node_cache_size</a></p></td><td><p>Maximum size of the heap memory to dedicate to the cached nodes.</p></td></tr><tr><td><p><a class="link" href="configuration-caches.html#config_relationship_cache_array_fraction" title="relationship_cache_array_fraction">relationship_cache_array_fraction</a></p></td><td><p>Fraction of the heap to dedicate to the array holding the relationships in the cache.</p></td></tr><tr><td><p><a class="link" href="configuration-caches.html#config_relationship_cache_size" title="relationship_cache_size">relationship_cache_size</a></p></td><td><p>Maximum size of the heap memory to dedicate to the cached relationships.</p></td></tr></tbody></table>
</div></div>
<div class="table" id="config_cache.memory_ratio"><p class="title"><strong>cache.memory_ratio</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><tbody><tr><td><p><span class="strong"><strong>Description</strong></span></p></td><td><p>Set how much of the memory available for caching to use for caching. It is recommended to not have this value exceed 70 percent.</p></td></tr><tr><td><p><span class="strong"><strong>Valid values</strong></span></p></td><td><p><code class="literal"><code class="literal">cache.memory_ratio</code></code> is a value between 0 and 100 which cannot be used in conjunction with other object cache size settings, and may not be set to more than 80% of the available heap space.</p></td></tr></tbody></table>
</div></div>
<div class="table" id="config_node_cache_array_fraction"><p class="title"><strong>node_cache_array_fraction</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><tbody><tr><td><p><span class="strong"><strong>Description</strong></span></p></td><td><p>Fraction of the heap to dedicate to the array holding the nodes in the cache. Specifying <code class="literal">5</code> will let that array itself take up 5% out of the entire heap. Increasing this figure will reduce the chance of hash collisions at the expense of more heap used for it. More collisions means more redundant loading of objects from the low level cache.</p></td></tr><tr><td><p><span class="strong"><strong>Valid values</strong></span></p></td><td><p><code class="literal"><code class="literal">node_cache_array_fraction</code></code> is a float which is in the range <code class="literal">+&lt;&lt;config_1.0,1.0&gt;&gt;+</code> to <code class="literal">+&lt;&lt;config_10.0,10.0&gt;&gt;+</code>.</p></td></tr><tr><td><p><span class="strong"><strong>Default value</strong></span></p></td><td><p><code class="literal">1.0</code></p></td></tr></tbody></table>
</div></div>
<div class="table" id="config_node_cache_size"><p class="title"><strong>node_cache_size</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><tbody><tr><td><p><span class="strong"><strong>Description</strong></span></p></td><td><p>Maximum size of the heap memory to dedicate to the cached nodes. Right before the maximum size is reached a purge is performed. The purge will evict objects from the cache until the cache size gets below 90% of the maximum size. Optimal settings for the maximum size depends on the size of your graph. The configured maximum size should leave enough room for other objects to coexist in the same JVM. At the same time it should be large enough to keep loading from the low level cache at a minimum. Predicted load on the JVM as well as layout of domain level objects should also be taken into consideration.</p></td></tr><tr><td><p><span class="strong"><strong>Valid values</strong></span></p></td><td><p><code class="literal"><code class="literal">node_cache_size</code></code> is a byte size (valid multipliers are <code class="literal">k</code>, <code class="literal">m</code>, <code class="literal">g</code>, <code class="literal">K</code>, <code class="literal">M</code>, <code class="literal">G</code>).</p></td></tr></tbody></table>
</div></div>
<div class="table" id="config_relationship_cache_array_fraction"><p class="title"><strong>relationship_cache_array_fraction</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><tbody><tr><td><p><span class="strong"><strong>Description</strong></span></p></td><td><p>Fraction of the heap to dedicate to the array holding the relationships in the cache. See <code class="literal"><a class="link" href="configuration-caches.html#config_node_cache_array_fraction" title="node_cache_array_fraction">node_cache_array_fraction</a></code> for more information.</p></td></tr><tr><td><p><span class="strong"><strong>Valid values</strong></span></p></td><td><p><code class="literal"><code class="literal">relationship_cache_array_fraction</code></code> is a float which is in the range <code class="literal">+&lt;&lt;config_1.0,1.0&gt;&gt;+</code> to <code class="literal">+&lt;&lt;config_10.0,10.0&gt;&gt;+</code>.</p></td></tr><tr><td><p><span class="strong"><strong>Default value</strong></span></p></td><td><p><code class="literal">1.0</code></p></td></tr></tbody></table>
</div></div>
<div class="table" id="config_relationship_cache_size"><p class="title"><strong>relationship_cache_size</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><tbody><tr><td><p><span class="strong"><strong>Description</strong></span></p></td><td><p>Maximum size of the heap memory to dedicate to the cached relationships. See <code class="literal"><a class="link" href="configuration-caches.html#config_node_cache_size" title="node_cache_size">node_cache_size</a></code> for more information.</p></td></tr><tr><td><p><span class="strong"><strong>Valid values</strong></span></p></td><td><p><code class="literal"><code class="literal">relationship_cache_size</code></code> is a byte size (valid multipliers are <code class="literal">k</code>, <code class="literal">m</code>, <code class="literal">g</code>, <code class="literal">K</code>, <code class="literal">M</code>, <code class="literal">G</code>).</p></td></tr></tbody></table>
</div></div>
<p>You can read about references and relevant JVM settings for Sun HotSpot here:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

<a class="ulink" href="http://weblogs.java.net/blog/enicholas/archive/2006/05/understanding_w.html" target="_blank">Understanding soft/weak references</a>

</li><li class="listitem">

<a class="ulink" href="http://jeremymanson.blogspot.com/2009/07/how-hotspot-decides-to-clear_07.html" target="_blank">How Hotspot Decides to Clear SoftReferences</a>

</li><li class="listitem">

<a class="ulink" href="http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_softrefs" target="_blank">HotSpot FAQ</a>

</li></ul></div>
</section>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://neo4j.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>