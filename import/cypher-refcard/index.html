<!DOCTYPE html>
<html class=" js no-flexbox flexbox-legacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en">
<head>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu:500|Droid+Serif' rel='stylesheet' type='text/css'>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Neo4j Cypher Refcard 2.2-SNAPSHOT</title>
    <meta name="viewport" content="width=device-width">
<!-- style -->
<link href="css/style.css" rel="stylesheet">
<script src="js/modernizr.custom.2.6.2.js"></script>
<link href="css/cypher_main.css" rel="stylesheet" media="print, screen" type="text/css">
<!-- favicon -->
<link rel="shortcut icon" href="images/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="images/favicon.ico" type="image/x-icon" />
<!-- Syntax Highlighter -->
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/codemirror.css" />
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/theme/neo.css" />
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/codemirror.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/addon/runmode/runmode.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/javascript/javascript.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/4.3.0/mode/cypher/cypher.js"></script>
<script src="js/colorize.js"></script>
<style>
.col {
  clear: left;
}

.columns {
  float: left;
  width: 440px;
}

.page {
  float: left;
}

footer div.mid {
  padding: 1em;
}

.moved {
  display: none;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
  if ( !window.jQuery )
  {
    document.write( '<script src="js/jquery.min.js"><\/script>' );
  }
</script>
<script type="text/javascript">
  $( function()
  {
    function init()
    {
      var pageWidth = $( window ).width();
      var numberOfColumns = 1;
      var columns = [];
      switch ( true )
      {
        case pageWidth >= 978 && pageWidth < 1350:
          numberOfColumns = 2;
          break;
        case pageWidth >= 1350 && pageWidth < 1800:
          numberOfColumns = 3;
          break;
        case pageWidth >= 1800 && pageWidth < 2210:
          numberOfColumns = 4;
          break;
        case pageWidth >= 2210 && pageWidth < 2640:
          numberOfColumns = 5;
          break;
        case pageWidth >= 2640:
          numberOfColumns = 6;
          break;
      }
      if ( numberOfColumns < 2 )
      {
        return;
      }
      var page = $( "#clearing-div" );
      for ( var i = 2; i <= numberOfColumns; i++ )
      {
        column = $( '<div class="columns" id="column-' + i + '"/>' );
        column.insertBefore( page );
        columns.push( column );
      }
      //           <div style="clear:both;"> </div>
      $( "#page > div.col" ).each( function()
      {
        var element = $( this );
        for ( var i = 2; i <= numberOfColumns; i++ )
        {
          var moveTo = "c" + numberOfColumns + "-" + i;
          if ( element.hasClass( moveTo ) )
          {
            var clone = element.clone( true );
            clone.appendTo( columns[i - 2] );
            element.addClass( "moved" );
          }
        }
      } );
    }
    init();
    $( window ).resize(function()
    {
      $( "div.columns" ).remove();
      $( "#page > div.col" ).removeClass( "moved" );
      init();
    });
  } );
</script>
  </head>
  <body>
    <header>
      <div class="mid">
        <img class="neo4j-logo" id="neo4j-logo" src="images/neo4j-refcard.png"><h1>
           Neo4j Cypher Refcard 2.2-SNAPSHOT
        </h1>
      </div>
    </header>
    <div class="main">
      <div class="mid">
        <div class="page" id="page">
<div class="col">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p><strong>Cypher is the declarative query language for Neo4j, the worldâ€™s leading graph database.</strong></p></div>
<div class="paragraph"><p>Key principles and capabilities of Cypher are as follows:</p></div>
<div class="ulist"><ul>
<li>
<p>
Cypher matches patterns of nodes and relationship in the graph, to extract information or modify the data.
</p>
</li>
<li>
<p>
Cypher has the concept of identifiers which denote named, bound elements and parameters.
</p>
</li>
<li>
<p>
Cypher can create, update, and remove nodes, relationships, labels, and properties.
</p>
</li>
<li>
<p>
Cypher manages indexes and constraints.
</p>
</li>
</ul></div>
<div class="paragraph"><p>You can try Cypher snippets live in the Neo4j Console at
<a href="http://console.neo4j.org" target="_blank">console.neo4j.org</a>
or read the full Cypher documentation at
<a href="http://docs.neo4j.org" target="_blank">docs.neo4j.org</a>.
For live graph models using Cypher check out <a href="http://gist.neo4j.org" target="_blank">GraphGist</a>.</p></div>
<div class="paragraph"><p>Note: <span class="monospaced">{value}</span> denotes either literals, for ad hoc Cypher queries; or parameters, which is the best practice for applications.
Neo4j properties can be strings, numbers, booleans or arrays thereof.
Cypher also supports maps and collections.</p></div>
</div>
</div>
</div>
<div class="col">
<h2 id="_syntax">Syntax</h2>
</div>
<div class="col cardread c2-2 c3-2 c4-2 c5-2"><div class="blk"><table><tbody><tr><th>Read Query Structure</th></tr><tr><td><pre class="programlisting brush: cypher">[MATCH WHERE]
[OPTIONAL MATCH WHERE]
[WITH [ORDER BY] [SKIP] [LIMIT]]
RETURN [ORDER BY] [SKIP] [LIMIT]</pre></td></tr></tbody></table></div></div>
<div class='col cardread c2-2 c3-2 c4-2 c5-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >MATCH</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person)-[:KNOWS]-&gt;(m:Person)
WHERE n.name="Alice"</pre></div>
<div class="paragraph"><p>Node patterns can contain labels and properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN n,m</pre></div>
<div class="paragraph"><p>Any pattern can be used in <span class="monospaced">MATCH</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n {name:'Alice'})--&gt;(m)</pre></div>
<div class="paragraph"><p>Patterns with node properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN p</pre></div>
<div class="paragraph"><p>Assign a path to <span class="monospaced">p</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">OPTIONAL MATCH (n)-[r]-&gt;(m)</pre></div>
<div class="paragraph"><p>Optional pattern, <span class="monospaced">NULL</span>s will be used for missing parts.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardread c2-2 c3-2 c4-2 c5-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >WHERE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">AND n.property &lt;&gt; {value}</pre></div>
<div class="paragraph"><p>Use a predicate to filter.
Note that <span class="monospaced">WHERE</span> is always part of a  <span class="monospaced">MATCH</span>, <span class="monospaced">OPTIONAL MATCH</span>, <span class="monospaced">WITH</span> or <span class="monospaced">START</span> clause.
Putting it after a different clause in a query will alter what it does.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardread c3-3 c4-3 c5-3 c6-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >RETURN</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN *</pre></div>
<div class="paragraph"><p>Return the value of all identifiers.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN n AS columnName</pre></div>
<div class="paragraph"><p>Use alias for result column name.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN DISTINCT n</pre></div>
<div class="paragraph"><p>Return unique rows.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">ORDER BY n.property</pre></div>
<div class="paragraph"><p>Sort the result.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">ORDER BY n.property DESC</pre></div>
<div class="paragraph"><p>Sort the result in descending order.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SKIP {skip_number}</pre></div>
<div class="paragraph"><p>Skip a number of results.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">LIMIT {limit_number}</pre></div>
<div class="paragraph"><p>Limit the number of results.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SKIP {skip_number} LIMIT {limit_number}</pre></div>
<div class="paragraph"><p>Skip results at the top and limit the number of results.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN count(*)</pre></div>
<div class="paragraph"><p>The number of matching rows.
See Aggregation for more.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardread c2-2 c3-3 c4-3 c5-3 c6-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >WITH</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (user)-[:FRIEND]-(friend)
WHERE user.name = {name}
WITH user, count(friend) AS friends
WHERE friends &gt; 10
RETURN user</pre></div>
<div class="paragraph"><p>The <span class="monospaced">WITH</span> syntax is similar to <span class="monospaced">RETURN</span>.
It separates query parts explicitly, allowing you to declare which identifiers to carry over to the next part.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (user)-[:FRIEND]-(friend)
WITH user, count(friend) AS friends
ORDER BY friends DESC
SKIP 1 LIMIT 3
RETURN user</pre></div>
<div class="paragraph"><p>You can also use <span class="monospaced">ORDER BY</span>, <span class="monospaced">SKIP</span>, <span class="monospaced">LIMIT</span> with <span class="monospaced">WITH</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardread c2-2 c3-2 c4-2 c5-4 c6-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >UNION</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (a)-[:KNOWS]-&gt;(b)
RETURN b.name
UNION
MATCH (a)-[:LOVES]-&gt;(b)
RETURN b.name</pre></div>
<div class="paragraph"><p>Returns the distinct union of all query results.
Result column types and names have to match.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (a)-[:KNOWS]-&gt;(b)
RETURN b.name
UNION ALL
MATCH (a)-[:LOVES]-&gt;(b)
RETURN b.name</pre></div>
<div class="paragraph"><p>Returns the union of all query results, including duplicated rows.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class="col cardwrite c2-2 c4-4 c5-5 c6-3"><div class="blk"><table><tbody><tr><th>Write-Only Query Structure</th></tr><tr><td><pre class="programlisting brush: cypher">(CREATE [UNIQUE] | MERGE)*
[SET|DELETE|REMOVE|FOREACH]*
[RETURN [ORDER BY] [SKIP] [LIMIT]]</pre></td></tr></tbody></table></div></div>
<div class="col cardwrite c2-2 c4-4 c5-5 c6-3"><div class="blk"><table><tbody><tr><th>Read-Write Query Structure</th></tr><tr><td><pre class="programlisting brush: cypher">[MATCH WHERE]
[OPTIONAL MATCH WHERE]
[WITH [ORDER BY] [SKIP] [LIMIT]]
(CREATE [UNIQUE] | MERGE)*
[SET|DELETE|REMOVE|FOREACH]*
[RETURN [ORDER BY] [SKIP] [LIMIT]]</pre></td></tr></tbody></table></div></div>
<div class='col cardwrite c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >CREATE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n {name: {value}})</pre></div>
<div class="paragraph"><p>Create a node with the given properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n {map})</pre></div>
<div class="paragraph"><p>Create a node with the given properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n {collectionOfMaps})</pre></div>
<div class="paragraph"><p>Create nodes with the given properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n)-[r:KNOWS]-&gt;(m)</pre></div>
<div class="paragraph"><p>Create a relationship with the given type and direction; bind an identifier to it.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n)-[:LOVES {since: {value}}]-&gt;(m)</pre></div>
<div class="paragraph"><p>Create a relationship with the given type, direction, and properties.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >MERGE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MERGE (n:Person {name: {value}})
ON CREATE SET n.created=timestamp()
ON MATCH SET
    n.counter= coalesce(n.counter, 0) + 1,
    n.accessTime = timestamp()</pre></div>
<div class="paragraph"><p>Match pattern or create it if it does not exist.
Use <span class="monospaced">ON CREATE</span> and <span class="monospaced">ON MATCH</span> for conditional updates.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (a:Person {name: {value1}}),
      (b:Person {name: {value2}})
MERGE (a)-[r:LOVES]-&gt;(b)</pre></div>
<div class="paragraph"><p><span class="monospaced">MERGE</span> finds or creates a relationship between the nodes.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (a:Person {name: {value1}})
MERGE
  (a)-[r:KNOWS]-&gt;(b:Person {name: {value3}})</pre></div>
<div class="paragraph"><p><span class="monospaced">MERGE</span> finds or creates subgraphs attached to the node.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c2-2 c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >SET</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SET n.property = {value},
    n.property2 = {value2}</pre></div>
<div class="paragraph"><p>Update or create a property.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SET n = {map}</pre></div>
<div class="paragraph"><p>Set all properties.
This will remove any existing properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SET n += {map}</pre></div>
<div class="paragraph"><p>Add and update properties, while keeping existing ones.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SET n:Person</pre></div>
<div class="paragraph"><p>Adds a label <span class="monospaced">Person</span> to a node.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c2-2 c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >DELETE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">DELETE n, r</pre></div>
<div class="paragraph"><p>Delete a node and a relationship.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c2-2 c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >REMOVE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">REMOVE n:Person</pre></div>
<div class="paragraph"><p>Remove a label from <span class="monospaced">n</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">REMOVE n.property</pre></div>
<div class="paragraph"><p>Remove a property.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >INDEX</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE INDEX ON :Person(name)</pre></div>
<div class="paragraph"><p>Create an index on the label <span class="monospaced">Person</span> and property <span class="monospaced">name</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person) WHERE n.name = {value}</pre></div>
<div class="paragraph"><p>An index can be automatically used for the equality comparison.
Note that for example <span class="monospaced">lower(n.name) = {value}</span> will not use an index.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person) WHERE n.name IN [{value}]</pre></div>
<div class="paragraph"><p>An index can be automatically used for the IN collection checks.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person)
USING INDEX n:Person(name)
WHERE n.name = {value}</pre></div>
<div class="paragraph"><p>Index usage can be enforced, when Cypher uses a suboptimal index or
more than one index should be used.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">DROP INDEX ON :Person(name)</pre></div>
<div class="paragraph"><p>Drop the index on the label <span class="monospaced">Person</span> and property <span class="monospaced">name</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c2-2 c4-4 c5-5 c6-3'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >CONSTRAINT</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE CONSTRAINT ON (p:Person)
       ASSERT p.name IS UNIQUE</pre></div>
<div class="paragraph"><p>Create a unique constraint on the label <span class="monospaced">Person</span> and property <span class="monospaced">name</span>.
If any other node with that label is updated or created with a <span class="monospaced">name</span> that
already exists, the write operation will fail.
This constraint will create an accompanying index.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">DROP CONSTRAINT ON (p:Person)
     ASSERT p.name IS UNIQUE</pre></div>
<div class="paragraph"><p>Drop the unique constraint and index on the label <span class="monospaced">Person</span> and property <span class="monospaced">name</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardwrite c2-1 c4-4 c5-5 c6-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Import</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">LOAD CSV FROM
'http://docs.neo4j.org/refcard/2.2-SNAPSHOT/csv/artists.csv' AS line
CREATE (:Artist {name: line[1], year: toInt(line[2])})</pre></div>
<div class="paragraph"><p>Load data from a CSV file and create nodes.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">LOAD CSV WITH HEADERS FROM
'http://docs.neo4j.org/refcard/2.2-SNAPSHOT/csv/artists-with-headers.csv' AS line
CREATE (:Artist {name: line.Name, year: toInt(line.Year)})</pre></div>
<div class="paragraph"><p>Load CSV data which has headers.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">LOAD CSV FROM 'http://docs.neo4j.org/refcard/2.2-SNAPSHOT/csv/artists-fieldterminator.csv'
AS line FIELDTERMINATOR ';'
CREATE (:Artist {name: line[1], year: toInt(line[2])})</pre></div>
<div class="paragraph"><p>Use a different field terminator, not the default which is a comma (with no whitespace around it).</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class="col cardgeneral c3-2 c6-1"><div class="blk">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:50%;">
<col style="width:50%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2" > Operators</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Mathematical</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">+</span>, <span class="monospaced">-</span>, <span class="monospaced">*</span>, <span class="monospaced">/</span>, <span class="monospaced">%</span>, <span class="monospaced">^</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Comparison</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">=</span>, <span class="monospaced">&lt;&gt;</span>, <span class="monospaced">&lt;</span>, <span class="monospaced">&gt;</span>, <span class="monospaced">&lt;=</span>, <span class="monospaced">&gt;=</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">AND</span>, <span class="monospaced">OR</span>, <span class="monospaced">XOR</span>, <span class="monospaced">NOT</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">+</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Collection</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">+</span>, <span class="monospaced">IN</span>, <span class="monospaced">[x]</span>, <span class="monospaced">[x .. y]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Regular Expression</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock monospaced"><span class="monospaced">=~</span></p></td>
</tr>
</tbody>
</table>
</div></div>
<div class="col cardgeneral c3-2 c6-1"><div class="blk">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" > NULL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="ulist"><ul>
<li>
<p>
<span class="monospaced">NULL</span> is used to represent missing/undefined values.
</p>
</li>
<li>
<p>
<span class="monospaced">NULL</span> is not equal to <span class="monospaced">NULL</span>.
  Not knowing two values does not imply that they are the same value.
  So the expression <span class="monospaced">NULL = NULL</span> yields <span class="monospaced">NULL</span> and not <span class="monospaced">TRUE</span>.
  To check if an expressoin is <span class="monospaced">NULL</span>, use <span class="monospaced">IS NULL</span>.
</p>
</li>
<li>
<p>
Arithmetic expressions, comparisons and function calls (except <span class="monospaced">coalesce</span>) will return <span class="monospaced">NULL</span> if any argument is <span class="monospaced">NULL</span>.
</p>
</li>
<li>
<p>
Missing elements like a property that doesn&#8217;t exist or accessing elements that don&#8217;t exist in a collection yields <span class="monospaced">NULL</span>.
</p>
</li>
<li>
<p>
In <span class="monospaced">OPTIONAL MATCH</span> clauses, <span class="monospaced">NULL</span>s will be used for missing parts of the pattern.
</p>
</li>
</ul></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-2 c6-4'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Patterns</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)--&gt;(m)</pre></div>
<div class="paragraph"><p>A relationship from <span class="monospaced">n</span> to <span class="monospaced">m</span> exists.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n:Person)</pre></div>
<div class="paragraph"><p>Matches nodes with the label <span class="monospaced">Person</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n:Person:Swedish)</pre></div>
<div class="paragraph"><p>Matches nodes which have both <span class="monospaced">Person</span> and <span class="monospaced">Swedish</span> labels.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n:Person {name: {value}})</pre></div>
<div class="paragraph"><p>Matches nodes with the declared properties.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n:Person)--&gt;(m)</pre></div>
<div class="paragraph"><p>Node <span class="monospaced">n</span> labeled <span class="monospaced">Person</span> has a relationship to <span class="monospaced">m</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)--(m)</pre></div>
<div class="paragraph"><p>A relationship in any direction between <span class="monospaced">n</span> and <span class="monospaced">m</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(m)&lt;-[:KNOWS]-(n)</pre></div>
<div class="paragraph"><p>A relationship from <span class="monospaced">n</span> to <span class="monospaced">m</span> of type <span class="monospaced">KNOWS</span> exists.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)-[:KNOWS|LOVES]-&gt;(m)</pre></div>
<div class="paragraph"><p>A relationship from <span class="monospaced">n</span> to <span class="monospaced">m</span> of type <span class="monospaced">KNOWS</span> or <span class="monospaced">LOVES</span> exists.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)-[r]-&gt;(m)</pre></div>
<div class="paragraph"><p>Bind an identifier to the relationship.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)-[*1..5]-&gt;(m)</pre></div>
<div class="paragraph"><p>Variable length paths.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)-[*]-&gt;(m)</pre></div>
<div class="paragraph"><p>Any depth.
See the performance tips.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE UNIQUE</pre></div>
<div class="paragraph"><p>Match or set properties in <span class="monospaced">MATCH</span>, <span class="monospaced">CREATE</span>, <span class="monospaced">CREATE UNIQUE</span> or <span class="monospaced">MERGE</span> clauses.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">shortestPath((n1:Person)-[*..6]-(n2:Person))</pre></div>
<div class="paragraph"><p>Find a single shortest path.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">allShortestPaths((n1:Person)--&gt;(n2:Person))</pre></div>
<div class="paragraph"><p>Find all shortest paths.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-1 c3-2 c4-2 c5-3 c6-4'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Labels</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE (n:Person {name:{value}})</pre></div>
<div class="paragraph"><p>Create a node with label and property.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MERGE (n:Person {name:{value}})</pre></div>
<div class="paragraph"><p>Matches or creates unique node(s) with label and property.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">SET n:Spouse:Parent:Employee</pre></div>
<div class="paragraph"><p>Add label(s) to a node.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person)</pre></div>
<div class="paragraph"><p>Matches nodes labeled as <span class="monospaced">Person</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (n:Person)
WHERE n.name = {value}</pre></div>
<div class="paragraph"><p>Matches nodes labeled <span class="monospaced">Person</span> with the given <span class="monospaced">name</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">WHERE (n:Person)</pre></div>
<div class="paragraph"><p>Checks existence of label on node.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">labels(n)</pre></div>
<div class="paragraph"><p>Labels of the node.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">REMOVE n:Person</pre></div>
<div class="paragraph"><p>Remove label from node.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-1 c4-3 c5-2 c6-2'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Collections</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">['a','b','c'] AS coll</pre></div>
<div class="paragraph"><p>Literal collections are declared in square brackets.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">length({coll}) AS len, {coll}[0] AS value</pre></div>
<div class="paragraph"><p>Collections can be passed in as parameters.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">range({first_num},{last_num},{step}) AS coll</pre></div>
<div class="paragraph"><p>Range creates a collection of numbers (<span class="monospaced">step</span> is optional), other functions returning collections are:
<span class="monospaced">labels</span>, <span class="monospaced">nodes</span>, <span class="monospaced">relationships</span>, <span class="monospaced">rels</span>, <span class="monospaced">filter</span>, <span class="monospaced">extract</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (a)-[r:KNOWS*]-&gt;()
RETURN r AS rels</pre></div>
<div class="paragraph"><p>Relationship identifiers of a variable length path contain a collection of relationships.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">RETURN matchedNode.coll[0] AS value,
       length(matchedNode.coll) AS len</pre></div>
<div class="paragraph"><p>Properties can be arrays/collections of strings, numbers or booleans.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">coll[{idx}] AS value,
coll[{start_idx}..{end_idx}] AS slice</pre></div>
<div class="paragraph"><p>Collection elements can be accessed with <span class="monospaced">idx</span> subscripts in square brackets.
Invalid indexes return <span class="monospaced">NULL</span>.
Slices can be retrieved with intervals from <span class="monospaced">start_idx</span> to <span class="monospaced">end_idx</span> each of which can be omitted or negative.
Out of range elements are ignored.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">UNWIND {names} AS name
MATCH (n {name:name})
RETURN avg(n.age)</pre></div>
<div class="paragraph"><p>With <span class="monospaced">UNWIND</span>, you can transform any collection back into individual rows.
The example matches all names from a list of names.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-3 c4-3 c5-2 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Maps</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">{name:'Alice', age:38,
 address:{city:'London', residential:true}}</pre></div>
<div class="paragraph"><p>Literal maps are declared in curly braces much like property maps.
Nested maps and collections are supported.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MERGE (p:Person {name: {map}.name})
ON CREATE SET p={map}</pre></div>
<div class="paragraph"><p>Maps can be passed in as parameters and used as map or by accessing keys.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH (matchedNode:Person)
RETURN matchedNode</pre></div>
<div class="paragraph"><p>Nodes and relationships are returned as maps of their data.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">map.name, map.age, map.children[0]</pre></div>
<div class="paragraph"><p>Map entries can be accessed by their keys.
Invalid keys result in an error.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-1 c4-2 c5-4 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Relationship Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">type(a_relationship)</pre></div>
<div class="paragraph"><p>String representation of the relationship type.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">startNode(a_relationship)</pre></div>
<div class="paragraph"><p>Start node of the relationship.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">endNode(a_relationship)</pre></div>
<div class="paragraph"><p>End node of the relationship.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">id(a_relationship)</pre></div>
<div class="paragraph"><p>The internal id of the relationship.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-3 c4-2 c5-2 c6-4'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Predicates</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n.property &lt;&gt; {value}</pre></div>
<div class="paragraph"><p>Use comparison operators.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">has(n.property)</pre></div>
<div class="paragraph"><p>Use functions.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n.number &gt;= 1 AND n.number &lt;= 10</pre></div>
<div class="paragraph"><p>Use boolean operators to combine predicates.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n:Person</pre></div>
<div class="paragraph"><p>Check for node labels.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">identifier IS NULL</pre></div>
<div class="paragraph"><p>Check if something is <span class="monospaced">NULL</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">NOT has(n.property) OR n.property = {value}</pre></div>
<div class="paragraph"><p>Either property does not exist or predicate is <span class="monospaced">TRUE</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n.property = {value}</pre></div>
<div class="paragraph"><p>Non-existing property returns <span class="monospaced">NULL</span>, which is not equal to anything.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n.property =~ "Tob.*"</pre></div>
<div class="paragraph"><p>Regular expression.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">(n)-[:KNOWS]-&gt;(m)</pre></div>
<div class="paragraph"><p>Make sure the pattern has at least one match.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">NOT (n)-[:KNOWS]-&gt;(m)</pre></div>
<div class="paragraph"><p>Exclude matches to <span class="monospaced">(n)-[:KNOWS]-&gt;(m)</span> from the result.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">n.property IN [{value1}, {value2}]</pre></div>
<div class="paragraph"><p>Check if an element exists in a collection.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-3 c4-2 c5-2 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Collection Predicates</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">all(x IN coll WHERE has(x.property))</pre></div>
<div class="paragraph"><p>Returns <span class="monospaced">true</span> if the predicate is <span class="monospaced">TRUE</span> for all elements of the collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">any(x IN coll WHERE has(x.property))</pre></div>
<div class="paragraph"><p>Returns <span class="monospaced">true</span> if the predicate is <span class="monospaced">TRUE</span> for at least one element of the collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">none(x IN coll WHERE has(x.property))</pre></div>
<div class="paragraph"><p>Returns <span class="monospaced">TRUE</span> if the predicate is <span class="monospaced">FALSE</span> for all elements of the collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">single(x IN coll WHERE has(x.property))</pre></div>
<div class="paragraph"><p>Returns <span class="monospaced">TRUE</span> if the predicate is <span class="monospaced">TRUE</span> for exactly one element in the collection.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-2 c4-2 c5-3 c6-4'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">coalesce(n.property, {defaultValue})</pre></div>
<div class="paragraph"><p>The first non-<span class="monospaced">NULL</span> expression.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">timestamp()</pre></div>
<div class="paragraph"><p>Milliseconds since midnight, January 1, 1970 UTC.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">id(node_or_relationship)</pre></div>
<div class="paragraph"><p>The internal id of the relationship or node.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">toInt({expr})</pre></div>
<div class="paragraph"><p>Converts the given input in an integer if possible; otherwise it returns <span class="monospaced">NULL</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">toFloat({expr})</pre></div>
<div class="paragraph"><p>Converts the given input in a floating point number if possible; otherwise it returns <span class="monospaced">NULL</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c3-3 c4-3 c5-4 c6-6'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Path Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">length(path)</pre></div>
<div class="paragraph"><p>The length of the path.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">nodes(path)</pre></div>
<div class="paragraph"><p>The nodes in the path as a collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">relationships(path)</pre></div>
<div class="paragraph"><p>The relationships in the path as a collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH path=(n)--&gt;(m)
WHERE id(n) = %A% AND id(m) = %B%
RETURN extract(x IN nodes(path) | x.prop)</pre></div>
<div class="paragraph"><p>Assign a path and process its nodes.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH path = (begin) -[*]-&gt; (end)
WHERE id(begin) = %A% AND id(end) = %B%
FOREACH
  (n IN rels(path) | SET n.marked = TRUE)</pre></div>
<div class="paragraph"><p>Execute a mutating operation for each relationship of a path.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c3-3 c4-3 c5-4 c6-6'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Collection Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">length({coll})</pre></div>
<div class="paragraph"><p>Length of the collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">head({coll}), last({coll}), tail({coll})</pre></div>
<div class="paragraph"><p><span class="monospaced">head</span> returns the first, <span class="monospaced">last</span> the last element
of the collection. <span class="monospaced">tail</span> the remainder of the
collection. All return null for an empty collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">[x IN coll WHERE x.prop &lt;&gt; {value} | x.prop]</pre></div>
<div class="paragraph"><p>Combination of filter and extract in a concise notation.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">extract(x IN coll | x.prop)</pre></div>
<div class="paragraph"><p>A collection of the value of the expression for each element in the orignal collection.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">filter(x IN coll WHERE x.prop &lt;&gt; {value})</pre></div>
<div class="paragraph"><p>A filtered collection of the elements where the predicate is <span class="monospaced">TRUE</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">reduce(s = "", x IN coll | s + x.prop)</pre></div>
<div class="paragraph"><p>Evaluate expression for each element in the collection, accumulate the results.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">FOREACH (value IN coll |
 CREATE (:Person {name:value}))</pre></div>
<div class="paragraph"><p>Execute a mutating operation for each element in a collection.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-1 c3-2 c4-1 c5-1 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Mathematical Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">abs({expr})</pre></div>
<div class="paragraph"><p>The absolute value.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">rand()</pre></div>
<div class="paragraph"><p>A random value. Returns a new value for each call. Also useful for selecting subset or random ordering.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">round({expr})</pre></div>
<div class="paragraph"><p>Round to the nearest integer, <span class="monospaced">ceil</span> and <span class="monospaced">floor</span> find the next integer up or down.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">sqrt({expr})</pre></div>
<div class="paragraph"><p>The square root.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">sign({expr})</pre></div>
<div class="paragraph"><p><span class="monospaced">0</span> if zero, <span class="monospaced">-1</span> if negative, <span class="monospaced">1</span> if positive.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">sin({expr})</pre></div>
<div class="paragraph"><p>Trigonometric functions, also <span class="monospaced">cos</span>, <span class="monospaced">tan</span>, <span class="monospaced">cot</span>, <span class="monospaced">asin</span>, <span class="monospaced">acos</span>, <span class="monospaced">atan</span>, <span class="monospaced">atan2</span>, <span class="monospaced">haversin</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">degrees({expr}), radians({expr}), pi()</pre></div>
<div class="paragraph"><p>Converts radians into degrees, use <span class="monospaced">radians</span> for the reverse. <span class="monospaced">pi</span> for Ï€.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">log10({expr}), log({expr}), exp({expr}), e()</pre></div>
<div class="paragraph"><p>Logarithm base 10, natural logarithm, <span class="monospaced">e</span> to the power of the parameter. Value of <span class="monospaced">e</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-2 c3-2 c4-1 c5-3 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >String Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">toString({expression})</pre></div>
<div class="paragraph"><p>String representation of the expression.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">replace({original}, {search}, {replacement})</pre></div>
<div class="paragraph"><p>Replace all occurrences of <span class="monospaced">search</span> with <span class="monospaced">replacement</span>.
All arguments are be expressions.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">substring({original}, {begin}, {sub_length})</pre></div>
<div class="paragraph"><p>Get part of a string.
The <span class="monospaced">sub_length</span> argument is optional.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">left({original}, {sub_length}),
  right({original}, {sub_length})</pre></div>
<div class="paragraph"><p>The first part of a string. The last part of the string.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">trim({original}), ltrim({original}),
  rtrim({original})</pre></div>
<div class="paragraph"><p>Trim all whitespace, or on left or right side.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">upper({original}), lower({original})</pre></div>
<div class="paragraph"><p>UPPERCASE and lowercase.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">split({original}, {delimiter})</pre></div>
<div class="paragraph"><p>Split a string into a collection of strings.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c3-3 c4-2 c5-4 c6-6'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Aggregation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">count(*)</pre></div>
<div class="paragraph"><p>The number of matching rows.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">count(identifier)</pre></div>
<div class="paragraph"><p>The number of non-<span class="monospaced">NULL</span> values.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">count(DISTINCT identifier)</pre></div>
<div class="paragraph"><p>All aggregation functions also take the <span class="monospaced">DISTINCT</span> modifier,
which removes duplicates from the values.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">collect(n.property)</pre></div>
<div class="paragraph"><p>Collection from the values, ignores <span class="monospaced">NULL</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">sum(n.property)</pre></div>
<div class="paragraph"><p>Sum numerical values. Similar functions are <span class="monospaced">avg</span>, <span class="monospaced">min</span>, <span class="monospaced">max</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">percentileDisc(n.property, {percentile})</pre></div>
<div class="paragraph"><p>Discrete percentile. Continuous percentile is <span class="monospaced">percentileCont</span>.
The <span class="monospaced">percentile</span> argument is from <span class="monospaced">0.0</span> to <span class="monospaced">1.0</span>.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">stdev(n.property)</pre></div>
<div class="paragraph"><p>Standard deviation for a sample of a population.
For an entire population use <span class="monospaced">stdevp</span>.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardgeneral c2-1 c3-3 c4-3 c5-4 c6-1'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >CASE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CASE n.eyes
 WHEN 'blue' THEN 1
 WHEN 'brown' THEN 2
 ELSE 3
END</pre></div>
<div class="paragraph"><p>Return <span class="monospaced">THEN</span> value from the matching <span class="monospaced">WHEN</span> value.
The <span class="monospaced">ELSE</span> value is optional, and substituted for <span class="monospaced">NULL</span> if missing.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CASE
 WHEN n.eyes = 'blue' THEN 1
 WHEN n.age &lt; 40 THEN 2
 ELSE 3
END</pre></div>
<div class="paragraph"><p>Return <span class="monospaced">THEN</span> value from the first <span class="monospaced">WHEN</span> predicate evaluating to <span class="monospaced">TRUE</span>.
Predicates are evaluated in order.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class="col carddeprecation c2-2 c3-3 c4-4 c5-3 c6-6"><div class="blk">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Upgrading</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="paragraph"><p>With Neo4j 2.0 several Cypher features in version 1.9 have been deprecated or removed.</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">START</span> is optional.
</p>
</li>
<li>
<p>
<span class="monospaced">MERGE</span> will take <span class="monospaced">CREATE UNIQUE</span>'s role for the unique creation of patterns.
  Note that they are not the same, though.
</p>
</li>
<li>
<p>
Optional relationships are handled by <span class="monospaced">OPTIONAL MATCH</span>, not question marks.
</p>
</li>
<li>
<p>
Non-existing properties return <span class="monospaced">NULL</span>, <span class="monospaced">n.prop?</span> and <span class="monospaced">n.prop!</span> have been removed.
</p>
</li>
<li>
<p>
The separator for collection functions changed from <span class="monospaced">:</span> to <span class="monospaced">|</span>.
</p>
</li>
<li>
<p>
Paths are no longer collections, use <span class="monospaced">nodes(path)</span> or <span class="monospaced">rels(path)</span>.
</p>
</li>
<li>
<p>
Parentheses around nodes in patterns are no longer optional.
</p>
</li>
<li>
<p>
<span class="monospaced">CREATE a={property:â€™valueâ€™}</span> has been removed.
</p>
</li>
<li>
<p>
Use <span class="monospaced">REMOVE</span> to remove properties.
</p>
</li>
<li>
<p>
Parameters for index-keys and nodes in patterns are no longer allowed.
</p>
</li>
<li>
<p>
To still use the older syntax, prepend your Cypher statement with <span class="monospaced">CYPHER 1.9</span>.
</p>
</li>
</ul></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardcol carddeprecation c2-1 c3-2 c4-3 c5-4 c6-5'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >START</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH n</pre></div>
<div class="paragraph"><p>Start from all nodes.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH n WHERE id(n) IN {ids}</pre></div>
<div class="paragraph"><p>Start from one or more nodes specified by id.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">MATCH n, m
WHERE id(n) = {id1} AND id(m) = {id2}</pre></div>
<div class="paragraph"><p>Multiple starting points.</p></div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">START n=node:nodeIndexName(key={value})</pre></div>
<div class="paragraph"><p>Query the index with an exact query.
Use <span class="monospaced">node_auto_index</span> for the automatic index.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class='col cardcol carddeprecation c2-1 c3-2 c4-4 c5-4 c6-6'><div class='blk'>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >CREATE UNIQUE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="listingblock">
<pre class="programlisting brush: cypher">CREATE UNIQUE
    (n)-[:KNOWS]-&gt;(m {property: {value}})</pre></div>
<div class="paragraph"><p>Match pattern or create it if it does not exist.
The pattern can not include any optional parts.</p></div></div></td>
</tr>
</tbody>
</table>
</div></div>
<div class="col cardperformance c3-1 c5-1 c6-6"><div class="blk">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:100%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Performance</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><div><div class="ulist"><ul>
<li>
<p>
Use parameters instead of literals when possible.
  This allows Cypher to re-use your queries instead of having to parse and build new execution plans.
</p>
</li>
<li>
<p>
Always set an upper limit for your variable length patterns.
  It&#8217;s easy to have a query go wild and touch all nodes in a graph by mistake.
</p>
</li>
<li>
<p>
Return only the data you need.
  Avoid returning whole nodes and relationships&#8201;&#8212;&#8201;instead, pick the data you need and return only that.
</p>
</li>
</ul></div></div></td>
</tr>
</tbody>
</table>
</div></div>
        </div>
        <div id="clearing-div" style="clear:both;"> </div>
      </div>
    </div>
    <footer>
      <div class="mid"><a href="https://github.com/neo4j/cypher-refcard" title="source code"><img src="images/github.png" alt="source code" /></a> <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a> by <a href="http://www.neotechnology.com/">Neo Technology</a>.</div>
 <script type="text/javascript">
  $(document).ready(function(){
    CodeMirror.colorize();
  });

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1192232-16']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
 </script>
    </footer>
</body></html>
