<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>35.1. Include Neo4j in your project -  - The Neo4j Manual v2.2-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="tutorials-java-embedded.html" title="Chapter 35. Using Neo4j embedded in Java applications" /><link rel="next" href="tutorials-java-embedded-hello-world.html" title="35.2. Hello World" /><link rel="copyright" href="ln-d5e39.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="35.1. Include Neo4j in your project" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-70838";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/1.4.11/jquery.scrollTo.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='//fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/theme/neo.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/addon/runmode/runmode.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/shell/shell.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/sql/sql.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/xml/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/clike/clike.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/cypher/cypher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.6.0/mode/properties/properties.min.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.2-SNAPSHOT</span><span>35.1. Include Neo4j in your project</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="tutorials-java-embedded.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="tutorials-java-embedded.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="tutorials-java-embedded-hello-world.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="tutorials-java-embedded-setup"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">35.1. Include Neo4j in your project</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="tutorials-java-embedded-setup.html#_add_neo4j_to_the_build_path">Add Neo4j to the build path</a></span></li><li><span class="section"><a href="tutorials-java-embedded-setup.html#editions">Editions</a></span></li><li><span class="section"><a href="tutorials-java-embedded-setup.html#_add_neo4j_as_a_dependency">Add Neo4j as a dependency</a></span></li><li><span class="section"><a href="tutorials-java-embedded-setup.html#tutorials-java-embedded-setup-startstop">Starting and stopping</a></span></li></ul></div>

<p>After selecting the appropriate <a class="link" href="tutorials-java-embedded-setup.html#editions" title="Editions">edition</a> for your platform, embed Neo4j in your Java application by including the Neo4j library jars in your build.
The following sections will show how to do this by either altering the build path directly or by using dependency management.</p>
<section class="section" id="_add_neo4j_to_the_build_path"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Add Neo4j to the build path</h3></div></div></div>

<p>Get the Neo4j libraries from one of these sources:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">

Extract a Neo4j <a class="ulink" href="http://neo4j.com/download/" target="_blank">download</a> zip/tarball, and use the <span class="emphasis"><em>jar</em></span> files found in the <span class="emphasis"><em>lib/</em></span> directory.

</li><li class="listitem">

Use the <span class="emphasis"><em>jar</em></span> files available from <a class="ulink" href="http://search.maven.org/#search|ga|1|g%3A%22org.neo4j%22" target="_blank">Maven Central Repository</a>

</li></ul></div>
<p>Add the jar files to your project:</p>
<div class="variablelist"><dl class="variablelist"><dt><span class="term">
JDK tools
</span></dt><dd>

 Append to <code class="literal">-classpath</code>

</dd><dt><span class="term">
Eclipse
</span></dt><dd>
<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">

Right-click on the project and then go <span class="emphasis"><em>Build Path → Configure Build Path.</em></span>
   In the dialog, choose <span class="emphasis"><em>Add External JARs</em></span>, browse to the Neo4j <span class="emphasis"><em>lib/</em></span> directory and select all of the jar files.

</li><li class="listitem">

Another option is to use <a class="ulink" href="http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm" target="_blank">User Libraries</a>.

</li></ul></div>
</dd><dt><span class="term">
IntelliJ IDEA
</span></dt><dd>

 See <a class="ulink" href="http://www.jetbrains.com/idea/webhelp/configuring-project-and-global-libraries.html" target="_blank">Libraries, Global Libraries, and the Configure Library dialog</a>

</dd><dt><span class="term">
NetBeans
</span></dt><dd>
<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">

Right-click on the <span class="emphasis"><em>Libraries</em></span> node of the project, choose <span class="emphasis"><em>Add JAR/Folder</em></span>, browse to the Neo4j <span class="emphasis"><em>lib/</em></span> directory and select all of the jar files.

</li><li class="listitem">

You can also handle libraries from the project node, see <a class="ulink" href="http://netbeans.org/kb/docs/java/project-setup.html#projects-classpath" target="_blank">Managing a Project’s Classpath</a>.

</li></ul></div>
</dd></dl></div>
</section>
<section class="section" id="editions"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Editions</h3></div></div></div>

<p>The following table outlines the available editions and their names for use with dependency management tools.</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>Follow the links in the table for details on dependency configuration with Apache Maven, Apache Buildr, Apache Ivy, Groovy Grape, Grails, Scala SBT!</p></td></tr></table></div>
<div class="table" id="d5e29377"><p class="title"><strong>Neo4j editions</strong></p><div class="table-contents">

<table cellspacing="0" cellpadding="0"><thead><tr><th>Edition     </th><th>Dependency      </th><th>Description  </th><th>License</th></tr></thead><tbody><tr><td><p>Community</p></td><td><p><a class="ulink" href="http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.neo4j%22%20AND%20a%3A%22neo4j%22" target="_blank">org.neo4j:neo4j</a></p></td><td><p>a high performance, fully ACID transactional graph database</p></td><td><p>GPLv3</p></td></tr><tr><td><p>Enterprise</p></td><td><p><a class="ulink" href="http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.neo4j%22%20AND%20a%3A%22neo4j-enterprise%22" target="_blank">org.neo4j:neo4j-enterprise</a></p></td><td><p>adding advanced monitoring, online backup and High Availability clustering</p></td><td><p>AGPLv3</p></td></tr></tbody></table>
</div></div>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Note</b><p>The listed dependencies do not contain the implementation, but pulls it in transitively.</p></td></tr></table></div>
<p>For more information regarding licensing, see the <a class="ulink" href="http://www.neo4j.org/learn/licensing" target="_blank">Licensing Guide</a>.</p>
<p>Javadocs can be downloaded packaged in jar files from Maven Central or read at <a class="ulink" href="javadocs/" target="_blank">javadocs</a>.</p>
</section>
<section class="section" id="_add_neo4j_as_a_dependency"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Add Neo4j as a dependency</h3></div></div></div>

<p>You can either go with the top-level artifact from the table above or include the individual components directly.
The examples included here use the top-level artifact approach.</p>
<section class="section" id="_maven"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Maven</h4></div></div></div>

<p>Add the dependency to your project along the lines of the snippet below.
This is usually done in the <code class="literal">pom.xml</code> file found in the root directory of the project.</p>
<p><strong>Maven dependency. </strong>
</p><pre class="programlisting" data-lang="xml">&lt;project&gt;
...
 &lt;dependencies&gt;
  &lt;dependency&gt;
   &lt;groupId&gt;org.neo4j&lt;/groupId&gt;
   &lt;artifactId&gt;neo4j&lt;/artifactId&gt;
   &lt;version&gt;2.2-SNAPSHOT&lt;/version&gt;
  &lt;/dependency&gt;
  ...
 &lt;/dependencies&gt;
...
&lt;/project&gt;</pre><p>
</p>
<p><span class="emphasis"><em>Where the <code class="literal">artifactId</code> is found in the editions table.</em></span></p>
</section>
<section class="section" id="_eclipse_and_maven"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Eclipse and Maven</h4></div></div></div>

<p>For development in <a class="ulink" href="http://www.eclipse.org" target="_blank">Eclipse</a>, it is recommended to install the <a class="ulink" href="http://www.eclipse.org/m2e/" target="_blank">m2e plugin</a> and let Maven manage the project build classpath instead, see above.
This also adds the possibility to build your project both via the command line with Maven and have a working Eclipse setup for development.</p>
</section>
<section class="section" id="_ivy"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Ivy</h4></div></div></div>

<p>Make sure to resolve dependencies from Maven Central, for example using this configuration in your <span class="emphasis"><em>ivysettings.xml</em></span> file:</p>
<pre class="programlisting" data-lang="xml">&lt;ivysettings&gt;
  &lt;settings defaultResolver="main"/&gt;
  &lt;resolvers&gt;
    &lt;chain name="main"&gt;
      &lt;filesystem name="local"&gt;
        &lt;artifact pattern="${ivy.settings.dir}/repository/[artifact]-[revision].[ext]" /&gt;
      &lt;/filesystem&gt;
      &lt;ibiblio name="maven_central" root="http://repo1.maven.org/maven2/" m2compatible="true"/&gt;
    &lt;/chain&gt;
  &lt;/resolvers&gt;
&lt;/ivysettings&gt;</pre>
<p>With that in place you can add Neo4j to the mix by having something along these lines to your <span class="emphasis"><em>ivy.xml</em></span> file:</p>
<pre class="programlisting" data-lang="xml">..
&lt;dependencies&gt;
  ..
  &lt;dependency org="org.neo4j" name="neo4j" rev="2.2-SNAPSHOT"/&gt;
  ..
&lt;/dependencies&gt;
..</pre>
<p><span class="emphasis"><em>Where the <code class="literal">name</code> is found in the editions table above</em></span></p>
</section>
<section class="section" id="_gradle"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Gradle</h4></div></div></div>

<p>The example below shows an example gradle build script for including the Neo4j libraries.</p>
<pre class="programlisting" data-lang="groovy">def neo4jVersion = "2.2-SNAPSHOT"
apply plugin: 'java'
repositories {
   mavenCentral()
}
dependencies {
   compile "org.neo4j:neo4j:${neo4jVersion}"
}</pre>
<p><span class="emphasis"><em>Where the coordinates (<code class="literal">org.neo4j:neo4j</code> in the example) are found in the editions table above.</em></span></p>
</section>
</section>
<section class="section" id="tutorials-java-embedded-setup-startstop"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Starting and stopping</h3></div></div></div>

<p>To create a new database or ópen an existing one you instantiate a <code class="literal"><a class="ulink" href="javadocs/org/neo4j/graphdb/GraphDatabaseService.html" target="_blank">GraphDatabaseService</a></code>.</p>
<pre class="programlisting" data-lang="java">graphDb = new GraphDatabaseFactory().newEmbeddedDatabase( DB_PATH );
registerShutdownHook( graphDb );
</pre>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Note</b><p>The <code class="literal">GraphDatabaseService</code> instance can be shared among multiple threads.
Note however that you can’t create multiple instances pointing to the same database.</p></td></tr></table></div>
<p>To stop the database, call the <code class="literal">shutdown()</code> method:</p>
<pre class="programlisting" data-lang="java">graphDb.shutdown();
</pre>
<p>To make sure Neo4j is shut down properly you can add a shutdown hook:</p>
<pre class="programlisting" data-lang="java">private static void registerShutdownHook( final GraphDatabaseService graphDb )
{
    // Registers a shutdown hook for the Neo4j instance so that it
    // shuts down nicely when the VM exits (even if you "Ctrl-C" the
    // running application).
    Runtime.getRuntime().addShutdownHook( new Thread()
    {
        @Override
        public void run()
        {
            graphDb.shutdown();
        }
    } );
}
</pre>
<section class="section" id="tutorials-java-embedded-setup-config"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Starting an embedded database with configuration settings</h4></div></div></div>

<p>To start Neo4j with configuration settings, a Neo4j properties file can be loaded like this:</p>
<pre class="programlisting" data-lang="java">GraphDatabaseService graphDb = new GraphDatabaseFactory()
    .newEmbeddedDatabaseBuilder( storeDir )
    .loadPropertiesFromFile( pathToConfig + "neo4j.properties" )
    .newGraphDatabase();
</pre>
<p>Configuration settings can also be applied programmatically, like so:</p>
<pre class="programlisting" data-lang="java">GraphDatabaseService graphDb = new GraphDatabaseFactory()
    .newEmbeddedDatabaseBuilder( storeDir )
    .setConfig( GraphDatabaseSettings.mapped_memory_total_size, "512M" )
    .setConfig( GraphDatabaseSettings.string_block_size, "60" )
    .setConfig( GraphDatabaseSettings.array_block_size, "300" )
    .newGraphDatabase();
</pre>
<p>For configuration settings, see <a class="xref" href="configuration.html" title="Chapter 24. Configuration &amp; Performance">Chapter 24, <em>Configuration &amp; Performance</em></a>.</p>
</section>
<section class="section" id="tutorials-java-embedded-setup-readonly"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Starting an embedded read-only instance</h4></div></div></div>

<p>If you want a <span class="emphasis"><em>read-only view</em></span> of the database, create an instance this way:</p>
<pre class="programlisting" data-lang="java">graphDb = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(
        "target/read-only-db/location" )
                                    .setConfig( GraphDatabaseSettings.read_only, "true" )
                                    .newGraphDatabase();
</pre>
<p>Obviously the database has to already exist in this case.</p>
<div class="admonitionblock Note"><table><tr><td class="icon"><img alt="[Note]" src="images/icons/admon/note.svg" /></td><td class="content"><b>Note</b><p>Concurrent access to the same database files by multiple (read-only or write) instances is not supported.</p></td></tr></table></div>
</section>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://neo4j.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>