<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>29.3. Import tool examples -  - The Neo4j Manual v2.3-SNAPSHOT</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="prev" href="import-tool-usage.html" title="29.2. Command line usage" /><link rel="next" href="import-tool-output-and-statistics.html" title="29.4. Output and statistics" /><link rel="copyright" href="ln-d5e39.html" title="License: Creative Commons 3.0" /><meta name="Section-title" content="29.3. Import tool examples" /><script type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-74899";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><meta name="viewport" content="width=device-width, initial-scale=1" /><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" type="text/css" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/redmond/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><link rel="stylesheet" type="text/css" href="common/css/positioning.css" /><link rel="stylesheet" type="text/css" href="common/css/style.css" /><!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
  <![endif]--><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" /><script type="text/javascript" src="common/browserDetect.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script><script type="text/javascript" src="common/jquery/jquery.highlight.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.1/jquery.scrollTo.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script><script type="text/javascript" src="common/main.js"></script><script type="text/javascript" src="search/l10n.js"></script><script type="text/javascript" src="search/htmlFileInfoList.js"></script><script type="text/javascript" src="common/search.js"></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"></script><script type="text/javascript" src="search/index-1.js"></script><script type="text/javascript" src="search/index-2.js"></script><script type="text/javascript" src="search/index-3.js"></script>


<!-- favicon -->

<link rel="shortcut icon" href="common/images/favicon.ico" />

<!-- fonts -->

<link href='//fonts.googleapis.com/css?family=Ubuntu+Mono|PT+Sans:400,700,400italic' rel='stylesheet' type='text/css' />

<!-- Syntax Highlighter -->

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/codemirror.min.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/theme/neo.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/codemirror.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/addon/runmode/runmode.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/javascript/javascript.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/shell/shell.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/sql/sql.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/xml/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/clike/clike.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/cypher/cypher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.6.0/mode/properties/properties.min.js"></script>

<script src="js/colorize.js"></script>
 
<script type="text/javascript">
  $(function (){
    CodeMirror.colorize();
  });
</script>

<!-- Section table of contents -->

<script type="text/javascript" src="js/toc.js"></script>

<!-- Cypher Console -->

<script type="text/javascript" src="js/console.js"></script>
<script type="text/javascript" src="js/cypherconsole.js"></script>

<!-- Version -->
<script type="text/javascript" src="js/version.js"></script>
<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Discuss -->
<script type="text/javascript" src="js/mutate.min.js"></script>
<script type="text/javascript" src="js/disqus.js"></script>

<script type="text/javascript">
    /*@cc_on @*/
    /*@
     $( '#content' ).addClass( 'internet-explorer' );
     @*/
</script>


</head><body><div id="header"><a href="index.html" id="logo"><img src="common/images/logo-neo4j.svg" alt="" /></a><h1><span id="book-title">The Neo4j Manual v2.3-SNAPSHOT</span><span>29.3. Import tool examples</span></h1><div id="navheader"><!----><div id="navLinks"><span><a id="showHideButton" href="#" class="pointLeft" tabindex="5" title="Show/Hide TOC tree"><i class="fa fa-columns"></i> Contents
            </a></span><span><a accesskey="p" id="navLinkPrevious" tabindex="5" href="import-tool-usage.html"><i class="fa fa-arrow-circle-left"></i> Prev</a></span><span><a accesskey="u" id="navLinkUp" tabindex="5" href="import-tool.html">Up <i class="fa fa-arrow-circle-up"></i></a></span><span><a accesskey="n" id="navLinkNext" tabindex="5" href="import-tool-output-and-statistics.html">Next <i class="fa fa-arrow-circle-right"></i></a></span></div></div></div><div id="content"><section class="section" id="import-tool-examples"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both">29.3. Import tool examples</h2></div></div></div><div class="toc"><ul class="toc"><li><span class="section"><a href="import-tool-examples.html#import-tool-basic-example">Basic example</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-configuration-example">Customizing configuration options</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-separate-headers-example">Using separate header files</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-multiple-input-files-example">Multiple input files</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-types-labels">Types and labels</a></span><ul><li><span class="section"><a href="import-tool-examples.html#import-tool-same-label-for-every-node-example">Using the same label for every node</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-same-relationship-type-for-every-relationship-example">Using the same relationship type for every relationship</a></span></li></ul></li><li><span class="section"><a href="import-tool-examples.html#import-tool-property-types-example">Property types</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-id-handling">ID handling</a></span><ul><li><span class="section"><a href="import-tool-examples.html#import-tool-sequential-identifiers-example">Working with sequential or auto incrementing identifiers</a></span></li></ul></li><li><span class="section"><a href="import-tool-examples.html#import-tool-bad-input-data-example">Bad input data</a></span><ul><li><span class="section"><a href="import-tool-examples.html#import-tool-rels-to-missing-nodes-example">Relationships referring to missing nodes</a></span></li><li><span class="section"><a href="import-tool-examples.html#import-tool-multiple-nodes-same-id-example">Multiple nodes with same id within same id space</a></span></li></ul></li></ul></div>

<p>Let’s look at a few examples.
We’ll use a data set containing movies, actors and roles.</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>While you’ll usually want to store your node identifier as a property on the node for looking it up later, it’s not mandatory.
If you don’t want the identifier to be persisted then don’t specify a property name in the <code class="literal">:ID</code> field.</p></td></tr></table></div>
<section class="section" id="import-tool-basic-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Basic example</h3></div></div></div>

<p>First we’ll look at the movies.
Each movie has an id, which is used to refer to it in other data sources, a title and a year
Along with these properties we’ll also add the node labels <code class="literal">Movie</code> and <code class="literal">Sequel</code>.</p>
<p>By default the import tool expects CSV files to be comma delimited.</p>
<p><strong>movies.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL
tt0133093,"The Matrix",1999,Movie
tt0234215,"The Matrix Reloaded",2003,Movie;Sequel
tt0242653,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p>Next up are the actors.
They have an id - in this case a shorthand - and a name and all have the Actor label.</p>
<p><strong>actors.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL
keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p>Finally we have the roles that an actor plays in a movie which will be represented by relationships in the database.
In order to create a relationship between nodes we refer to the ids used in <code class="literal">actors.csv</code> and <code class="literal">movies.csv</code> in the <code class="literal">START_ID</code> and <code class="literal">END_ID</code> fields.
We also need to provide a relationship type (in this case <code class="literal">ACTS_IN</code>) in the <code class="literal">:TYPE</code> field.</p>
<p><strong>roles.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID,:TYPE
keanu,"Neo",tt0133093,ACTED_IN
keanu,"Neo",tt0234215,ACTED_IN
keanu,"Neo",tt0242653,ACTED_IN
laurence,"Morpheus",tt0133093,ACTED_IN
laurence,"Morpheus",tt0234215,ACTED_IN
laurence,"Morpheus",tt0242653,ACTED_IN
carrieanne,"Trinity",tt0133093,ACTED_IN
carrieanne,"Trinity",tt0234215,ACTED_IN
carrieanne,"Trinity",tt0242653,ACTED_IN</pre><p>
</p>
<p>With all data in place, we execute the following command:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies.csv --nodes actors.csv --relationships roles.csv</pre>
<p>We’re now ready to start up a database from the target directory. (see <a class="xref" href="server-installation.html" title="23.2. Server Installation">Section 23.2, “Server Installation”</a>)</p>
<p>Once we’ve got the database up and running we can add appropriate indexes. (see <a class="xref" href="cypherdoc-labels-constraints-and-indexes.html" title="3.7. Labels, Constraints and Indexes">Section 3.7, “Labels, Constraints and Indexes”</a>.)</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>It is possible to import only nodes using the import tool - just don’t specify a relationships file when calling <code class="literal">neo4j-import</code>.
If you do this you’ll need to create relationships later by another method - the import tool only works for initial graph population.</p></td></tr></table></div>
</section>
<section class="section" id="import-tool-configuration-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Customizing configuration options</h3></div></div></div>

<p>We can customize the configuration options that the import tool uses (see <a class="xref" href="import-tool-usage.html#import-tool-options" title="Options">the section called “Options”</a>) if our data doesn’t fit the default format.
The following CSV files are delimited by <code class="literal">;</code>,  use <code class="literal">|</code> as their array delimiter and use <code class="literal">'</code> for quotes.</p>
<p><strong>movies2.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID;title;year:int;:LABEL
tt0133093;'The Matrix';1999;Movie
tt0234215;'The Matrix Reloaded';2003;Movie|Sequel
tt0242653;'The Matrix Revolutions';2003;Movie|Sequel</pre><p>
</p>
<p><strong>actors2.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID;name;:LABEL
keanu;'Keanu Reeves';Actor
laurence;'Laurence Fishburne';Actor
carrieanne;'Carrie-Anne Moss';Actor</pre><p>
</p>
<p><strong>roles2.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID;role;:END_ID;:TYPE
keanu;'Neo';tt0133093;ACTED_IN
keanu;'Neo';tt0234215;ACTED_IN
keanu;'Neo';tt0242653;ACTED_IN
laurence;'Morpheus';tt0133093;ACTED_IN
laurence;'Morpheus';tt0234215;ACTED_IN
laurence;'Morpheus';tt0242653;ACTED_IN
carrieanne;'Trinity';tt0133093;ACTED_IN
carrieanne;'Trinity';tt0234215;ACTED_IN
carrieanne;'Trinity';tt0242653;ACTED_IN</pre><p>
</p>
<p>We can then import these files with the following command line options:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies2.csv --nodes actors2.csv --relationships roles2.csv --delimiter ";" --array-delimiter "|" --quote "'"</pre>
</section>
<section class="section" id="import-tool-separate-headers-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Using separate header files</h3></div></div></div>

<p>When dealing with very large CSV files it’s more convenient to have the header in a separate file.
This makes it easier to edit the header as you avoid having to open a huge data file just to change it.</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p><code class="literal">import-tool</code> can also process single file compressed archives.
e.g. <code class="literal">--nodes nodes.csv.gz</code> or <code class="literal">--relationships rels.zip</code></p></td></tr></table></div>
<p>We’ll use the same data as in the previous example but put the headers in separate files.</p>
<p><strong>movies3-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL</pre><p>
</p>
<p><strong>movies3.csv </strong>
</p><pre class="programlisting" data-lang="plain">tt0133093,"The Matrix",1999,Movie
tt0234215,"The Matrix Reloaded",2003,Movie;Sequel
tt0242653,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p><strong>actors3-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL</pre><p>
</p>
<p><strong>actors3.csv </strong>
</p><pre class="programlisting" data-lang="plain">keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p><strong>roles3-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID,:TYPE</pre><p>
</p>
<p><strong>roles3.csv </strong>
</p><pre class="programlisting" data-lang="plain">keanu,"Neo",tt0133093,ACTED_IN
keanu,"Neo",tt0234215,ACTED_IN
keanu,"Neo",tt0242653,ACTED_IN
laurence,"Morpheus",tt0133093,ACTED_IN
laurence,"Morpheus",tt0234215,ACTED_IN
laurence,"Morpheus",tt0242653,ACTED_IN
carrieanne,"Trinity",tt0133093,ACTED_IN
carrieanne,"Trinity",tt0234215,ACTED_IN
carrieanne,"Trinity",tt0242653,ACTED_IN</pre><p>
</p>
<p>Note how the file groups are enclosed in quotation marks in the command:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes "movies3-header.csv,movies3.csv" --nodes "actors3-header.csv,actors3.csv" --relationships "roles3-header.csv,roles3.csv"</pre>
</section>
<section class="section" id="import-tool-multiple-input-files-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Multiple input files</h3></div></div></div>

<p>As well as using a separate header file you can also provide multiple nodes or relationships files.
This may be useful when processing the output from a Hadoop pipeline for example.
Files within such an input group can be specified with multiple match strings, delimited by <code class="literal">,</code>, where each match string can be either: <span class="emphasis"><em>the exact file name</em></span> or <span class="emphasis"><em>a regular expression matching one or more files</em></span>.
Multiple matching files will be sorted according to their characters <span class="emphasis"><em>and</em></span> their natural number sort order for file names containing numbers.</p>
<p><strong>movies4-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL</pre><p>
</p>
<p><strong>movies4-part1.csv </strong>
</p><pre class="programlisting" data-lang="plain">tt0133093,"The Matrix",1999,Movie
tt0234215,"The Matrix Reloaded",2003,Movie;Sequel</pre><p>
</p>
<p><strong>movies4-part2.csv </strong>
</p><pre class="programlisting" data-lang="plain">tt0242653,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p><strong>actors4-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL</pre><p>
</p>
<p><strong>actors4-part1.csv </strong>
</p><pre class="programlisting" data-lang="plain">keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor</pre><p>
</p>
<p><strong>actors4-part2.csv </strong>
</p><pre class="programlisting" data-lang="plain">carrieanne,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p><strong>roles4-header.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID,:TYPE</pre><p>
</p>
<p><strong>roles4-part1.csv </strong>
</p><pre class="programlisting" data-lang="plain">keanu,"Neo",tt0133093,ACTED_IN
keanu,"Neo",tt0234215,ACTED_IN
keanu,"Neo",tt0242653,ACTED_IN
laurence,"Morpheus",tt0133093,ACTED_IN
laurence,"Morpheus",tt0234215,ACTED_IN</pre><p>
</p>
<p><strong>roles4-part2.csv </strong>
</p><pre class="programlisting" data-lang="plain">laurence,"Morpheus",tt0242653,ACTED_IN
carrieanne,"Trinity",tt0133093,ACTED_IN
carrieanne,"Trinity",tt0234215,ACTED_IN
carrieanne,"Trinity",tt0242653,ACTED_IN</pre><p>
</p>
<p>The call to <code class="literal">neo4j-import</code> would look like this:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes "movies4-header.csv,movies4-part1.csv,movies4-part2.csv" --nodes "actors4-header.csv,actors4-part1.csv,actors4-part2.csv" --relationships "roles4-header.csv,roles4-part1.csv,roles4-part2.csv"</pre>
</section>
<section class="section" id="import-tool-types-labels"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Types and labels</h3></div></div></div>

<section class="section" id="import-tool-same-label-for-every-node-example"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Using the same label for every node</h4></div></div></div>

<p>If you want to use the same node label(s) for every node in your nodes file you can do this by specifying the appropriate value as an option to <code class="literal">neo4j-import</code>.
In this example we’ll put the label <code class="literal">Movie</code> on every node specified in <code class="literal">movies5.csv</code>:</p>
<p><strong>movies5.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int
tt0133093,"The Matrix",1999</pre><p>
</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>There’s then no need to specify the <code class="literal">:LABEL</code> field in the node file if you pass it as a command line option.
If you do then both the label provided in the file and the one provided on the command line will be added to the node.</p></td></tr></table></div>
<p>In this case, we’ll put the labels <code class="literal">Movie</code> and <code class="literal">Sequel</code> on the nodes specified in <code class="literal">sequels5.csv</code>.</p>
<p><strong>sequels5.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int
tt0234215,"The Matrix Reloaded",2003
tt0242653,"The Matrix Revolutions",2003</pre><p>
</p>
<p><strong>actors5.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name
keanu,"Keanu Reeves"
laurence,"Laurence Fishburne"
carrieanne,"Carrie-Anne Moss"</pre><p>
</p>
<p><strong>roles5.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID,:TYPE
keanu,"Neo",tt0133093,ACTED_IN
keanu,"Neo",tt0234215,ACTED_IN
keanu,"Neo",tt0242653,ACTED_IN
laurence,"Morpheus",tt0133093,ACTED_IN
laurence,"Morpheus",tt0234215,ACTED_IN
laurence,"Morpheus",tt0242653,ACTED_IN
carrieanne,"Trinity",tt0133093,ACTED_IN
carrieanne,"Trinity",tt0234215,ACTED_IN
carrieanne,"Trinity",tt0242653,ACTED_IN</pre><p>
</p>
<p>The call to <code class="literal">neo4j-import</code> would look like this:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes:Movie movies5.csv --nodes:Movie:Sequel sequels5.csv --nodes:Actor actors5.csv --relationships roles5.csv</pre>
</section>
<section class="section" id="import-tool-same-relationship-type-for-every-relationship-example"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Using the same relationship type for every relationship</h4></div></div></div>

<p>If you want to use the same relationship type for every relationship in your relationships file you can do this by
specifying the appropriate value as an option to <code class="literal">neo4j-import</code>.
In this example we’ll put the relationship type <code class="literal">ACTS_IN</code> on every relationship specified in <code class="literal">roles6.csv</code>:</p>
<p><strong>movies6.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL
tt0133093,"The Matrix",1999,Movie
tt0234215,"The Matrix Reloaded",2003,Movie;Sequel
tt0242653,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p><strong>actors6.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL
keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p><strong>roles6.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID
keanu,"Neo",tt0133093
keanu,"Neo",tt0234215
keanu,"Neo",tt0242653
laurence,"Morpheus",tt0133093
laurence,"Morpheus",tt0234215
laurence,"Morpheus",tt0242653
carrieanne,"Trinity",tt0133093
carrieanne,"Trinity",tt0234215
carrieanne,"Trinity",tt0242653</pre><p>
</p>
<div class="admonitionblock Tip"><table><tr><td class="icon"><img alt="[Tip]" src="images/icons/admon/tip.svg" /></td><td class="content"><b>Tip</b><p>If you provide a relationship type on the command line and in the relationships file the one in the file will be
applied.</p></td></tr></table></div>
<p>The call to <code class="literal">neo4j-import</code> would look like this:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies6.csv --nodes actors6.csv --relationships:ACTED_IN roles6.csv</pre>
</section>
</section>
<section class="section" id="import-tool-property-types-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Property types</h3></div></div></div>

<p>The type for properties specified in nodes and relationships files is defined in the header row.
(see <a class="xref" href="import-tool-header-format.html" title="29.1. CSV file header format">Section 29.1, “CSV file header format”</a>)</p>
<p>The following example creates a small graph containing one actor and one movie connected by an <code class="literal">ACTED_IN</code> relationship.
There is a <code class="literal">roles</code> property on the relationship which contains an array of the characters played by the actor in a movie.</p>
<p><strong>movies10.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL
tt0099892,"Joe Versus the Volcano",1990,Movie</pre><p>
</p>
<p><strong>actors10.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL
keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor
laurence,"Laurence Harvey",Actor</pre><p>
</p>
<p><strong>roles10.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,roles:string[],:END_ID,:TYPE
meg,"DeDe;Angelica Graynamore;Patricia Graynamore",tt0099892,ACTED_IN</pre><p>
</p>
<p>The arguments to <code class="literal">neo4j-import</code> would be the following:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies10.csv --nodes actors10.csv --relationships roles10.csv</pre>
</section>
<section class="section" id="import-tool-id-handling"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">ID handling</h3></div></div></div>

<p>Each node processed by <code class="literal">neo4j-import</code> must provide a unique id.
We use this id to find the correct nodes when creating relationships.</p>
<section class="section" id="import-tool-sequential-identifiers-example"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Working with sequential or auto incrementing identifiers</h4></div></div></div>

<p>The import tool makes the assumption that identifiers are unique across node files.
This may not be the case for data sets which use sequential, auto incremented or otherwise colliding identifiers.
Those data sets can define id spaces where identifiers are unique within their respective id space.</p>
<p>For example if movies and people both use sequential identifiers then we would define <code class="literal">Movie</code> and <code class="literal">Actor</code> id spaces.</p>
<p><strong>movies7.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID(Movie),title,year:int,:LABEL
1,"The Matrix",1999,Movie
2,"The Matrix Reloaded",2003,Movie;Sequel
3,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p><strong>actors7.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID(Actor),name,:LABEL
1,"Keanu Reeves",Actor
2,"Laurence Fishburne",Actor
3,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p>We also need to reference the appropriate id space in our relationships file so it knows which nodes to connect
together:</p>
<p><strong>roles7.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID(Actor),role,:END_ID(Movie)
1,"Neo",1
1,"Neo",2
1,"Neo",3
2,"Morpheus",1
2,"Morpheus",2
2,"Morpheus",3
3,"Trinity",1
3,"Trinity",2
3,"Trinity",3</pre><p>
</p>
<p>The command line arguments would remain the same as before:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies7.csv --nodes actors7.csv --relationships:ACTED_IN roles7.csv</pre>
</section>
</section>
<section class="section" id="import-tool-bad-input-data-example"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title">Bad input data</h3></div></div></div>

<p>The import tool has a threshold of how many bad entities (nodes/relationships) to tolerate and skip before failing the import.
By default <code class="literal">1000</code> bad entities are tolerated.
A bad tolerance of <code class="literal">0</code> will as an example fail the import on the first bad entity.
For more information, see the <code class="literal"><a class="link" href="import-tool-usage.html#import-tool-option-bad-tolerance">--bad-tolerance</a></code> option.</p>
<p>There are different types of bad input, which we will look into.</p>
<section class="section" id="import-tool-rels-to-missing-nodes-example"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Relationships referring to missing nodes</h4></div></div></div>

<p>Relationships that refer to missing node ids, either for <code class="literal">:START_ID</code> or <code class="literal">:END_ID</code> are considered bad relationships.
Whether or not such relationships are skipped is controlled with <code class="literal">--skip-bad-relationships</code> flag which can have the values <code class="literal">true</code> or <code class="literal">false</code> or no value, which means <code class="literal">true</code>.
Specifying <code class="literal">false</code> means that any bad relationship is considered an error and will fail the import.
For more information, see the <code class="literal"><a class="link" href="import-tool-usage.html#import-tool-option-skip-bad-relationships">--skip-bad-relationships</a></code> option.</p>
<p>In the following example there is a missing <code class="literal">emil</code> node referenced in the roles file.</p>
<p><strong>movies9.csv </strong>
</p><pre class="programlisting" data-lang="plain">movieId:ID,title,year:int,:LABEL
tt0133093,"The Matrix",1999,Movie
tt0234215,"The Matrix Reloaded",2003,Movie;Sequel
tt0242653,"The Matrix Revolutions",2003,Movie;Sequel</pre><p>
</p>
<p><strong>actors9.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL
keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor</pre><p>
</p>
<p><strong>roles9.csv </strong>
</p><pre class="programlisting" data-lang="plain">:START_ID,role,:END_ID,:TYPE
keanu,"Neo",tt0133093,ACTED_IN
keanu,"Neo",tt0234215,ACTED_IN
keanu,"Neo",tt0242653,ACTED_IN
laurence,"Morpheus",tt0133093,ACTED_IN
laurence,"Morpheus",tt0234215,ACTED_IN
laurence,"Morpheus",tt0242653,ACTED_IN
carrieanne,"Trinity",tt0133093,ACTED_IN
carrieanne,"Trinity",tt0234215,ACTED_IN
carrieanne,"Trinity",tt0242653,ACTED_IN
emil,"Emil",tt0133093,ACTED_IN</pre><p>
</p>
<p>The command line arguments would remain the same as before:</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes movies9.csv --nodes actors9.csv --relationships roles9.csv</pre>
<p>Since there was only one bad relationship the import process will complete successfully and a <code class="literal">not-imported.bad</code> file will be created and populated with the bad relationships.</p>
<p><strong>not-imported.bad </strong>
</p><pre class="programlisting" data-lang="plain">InputRelationship:
   source: roles9.csv:11
   properties: [role, Emil]
   startNode: emil
   endNode: tt0133093
   type: ACTED_IN
 refering to missing node emil</pre><p>
</p>
</section>
<section class="section" id="import-tool-multiple-nodes-same-id-example"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title">Multiple nodes with same id within same id space</h4></div></div></div>

<p>Nodes that specify <code class="literal">:ID</code> which has already been specified within the id space are considered bad nodes.
Whether or not such nodes are skipped is controlled with <code class="literal">--skip-duplicate-nodes</code> flag which can have the values <code class="literal">true</code> or <code class="literal">false</code> or no value, which means <code class="literal">true</code>.
Specifying <code class="literal">false</code> means that any duplicate node is considered an error and will fail the import.
For more information, see the <code class="literal"><a class="link" href="import-tool-usage.html#import-tool-option-skip-duplicate-nodes">--skip-duplicate-nodes</a></code> option.</p>
<p>In the following example there is a node id that is specified twice within the same id space.</p>
<p><strong>actors10.csv </strong>
</p><pre class="programlisting" data-lang="plain">personId:ID,name,:LABEL
keanu,"Keanu Reeves",Actor
laurence,"Laurence Fishburne",Actor
carrieanne,"Carrie-Anne Moss",Actor
laurence,"Laurence Harvey",Actor</pre><p>
</p>
<pre class="programlisting" data-lang="plain">neo4j-import --into path_to_target_directory --nodes actors10.csv --skip-duplicate-nodes</pre>
<p>Since there was only one bad node the import process will complete successfully and a <code class="literal">not-imported.bad</code> file will be created and populated with the bad node.</p>
<p><strong>not-imported.bad </strong>
</p><pre class="programlisting" data-lang="plain">Id 'laurence' is defined more than once in global id space, at least at actors10.csv:3 and actors10.csv:5</pre><p>
</p>
</section>
</section>
</section>

 <footer>
   <p>
   © Copyright
   <a href="http://creativecommons.org/licenses/by-sa/3.0/"><img id="copyright-img" src="images/by-sa.svg" alt="CC BY-SA 3.0" title="Creative Commons Attribution-ShareAlike 3.0"></a>
   <a href="http://neo4j.com/"><img id="neotech-logo" src="images/neo-technology.svg" alt="Neo Technology"></a>
   </p>
 </footer>
  <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    //Allow Linker
    ga('create', 'UA-1192232-34','auto', {'allowLinker': true});
    ga('send', 'pageview');

    // Load the plugin.
    ga('require', 'linker');

    // Define which domains to autoLink.
    ga('linker:autoLink', ['neo4j.org','neo4j.com','neotechnology.com','graphdatabases.com','graphconnect.com']);
  </script>

</div></body></html>